
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¹åŸæ°‘é—´è‰ºæœ¯å°ä¼ äººï¼šéé—å¯»å®è®°</title>
    <script src="https://cdn.keepwork.com/keepwork/cdn/tailwindcss@3.4.16.js"></script>    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
        }
        
        .pengzi-chat {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .game-card {
            transition: all 0.3s ease;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .treasure-box {
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
            to { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
        }
        
        .progress-bar {
            transition: width 0.5s ease;
        }
        
        .modal {
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 via-purple-50 to-pink-100 min-h-screen">
    
    <!-- æ¸¸æˆå®¹å™¨ -->
    <div id="gameContainer" class="max-w-4xl mx-auto p-4">
        
        <!-- å¼€åœºåœºæ™¯ -->
        <div id="introScene" class="scene">
            <div class="bg-white rounded-xl shadow-xl p-8 text-center">
                <div class="mb-6">
                    <div class="w-32 h-32 mx-auto bg-gradient-to-br from-orange-400 to-red-500 rounded-full flex items-center justify-center mb-4">
                        <div class="text-4xl">ğŸ¦€</div>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">é¹åŸæ°‘é—´è‰ºæœ¯å°ä¼ äºº</h1>
                    <h2 class="text-xl text-purple-600 mb-4">éé—å¯»å®è®°</h2>
                </div>
                
                <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-6 mb-6">
                    <div class="pengzi-chat inline-block mb-4">
                        <div class="bg-white text-gray-800 rounded-full w-16 h-16 flex items-center justify-center text-2xl mb-2">ğŸ¦€</div>
                        <p class="text-sm font-medium">é¹ä»”</p>
                    </div>
                    <div class="bg-white/20 rounded-lg p-4 text-left">
                        <p class="mb-3">ä½ å¥½ï¼Œæœªæ¥çš„æ–‡åŒ–å®ˆæŠ¤è€…ï¼</p>
                        <p class="mb-3">æˆ‘æ˜¯ä½ çš„æ™ºèƒ½åŠ©æ‰‹é¹ä»”ï¼Œä¸€åªæ¥è‡ªæ·±åœ³æ¹¾çº¢æ ‘æ—çš„æ‹›æ½®èŸ¹ã€‚</p>
                        <p>è®©æˆ‘ä»¬ä¸€èµ·ä¹˜åæ—¶å…‰æœºï¼Œå¯»æ‰¾å¹¶ä¼ æ‰¿å³å°†å¤±è½çš„"é¹åŸä¸ƒè‰º"å§ï¼</p>
                    </div>
                </div>
                
                <div class="skyline mb-6">
                    <div class="flex justify-center items-end space-x-2">
                        <div class="w-8 h-16 bg-gray-600 rounded-t"></div>
                        <div class="w-12 h-24 bg-blue-600 rounded-t"></div>
                        <div class="w-10 h-20 bg-purple-600 rounded-t"></div>
                        <div class="w-14 h-28 bg-gray-700 rounded-t"></div>
                        <div class="w-8 h-16 bg-green-600 rounded-t"></div>
                    </div>
                    <p class="text-sm text-gray-600 mt-2">æ·±åœ³å¤©é™…çº¿</p>
                </div>
                
                <button onclick="startGame()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-3 rounded-full font-medium hover:from-purple-600 hover:to-pink-600 transition-all transform hover:scale-105">
                    å¼€å§‹éé—å¯»å®ä¹‹æ—…
                </button>
            </div>
        </div>
        
        <!-- è¯¾å‰æµ‹è¯•åœºæ™¯ -->
        <div id="preTestScene" class="scene hidden">
            <div class="bg-white rounded-xl shadow-xl p-8">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">é¹åŸéé—çŸ¥å¤šå°‘ï¼Ÿ</h2>
                    <div class="pengzi-chat inline-block">
                        <div class="bg-orange-400 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl mb-2">ğŸ¦€</div>
                    </div>
                    <p class="text-gray-600">å°ä¼ äººï¼Œè®©æˆ‘ä»¬å…ˆæ¥æµ‹è¯•ä¸€ä¸‹ä½ å¯¹é¹åŸéé—çš„åˆå§‹è®°å¿†å§ï¼</p>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-lg font-medium mb-4">ä»¥ä¸‹å“ªäº›æ˜¯æ·±åœ³çš„æ°‘é—´è‰ºæœ¯ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰</h3>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4" id="preTestOptions">
                        <!-- é€‰é¡¹ä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="text-center">
                    <button onclick="submitPreTest()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        æäº¤ç­”æ¡ˆ
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ä½“éªŒåœºæ™¯ -->
        <div id="experienceScene" class="scene hidden">
            <div class="bg-white rounded-xl shadow-xl p-8">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">é¹åŸéé—å·¥åŠ</h2>
                    <div class="pengzi-chat inline-block mb-4">
                        <div class="bg-orange-400 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl mb-2">ğŸ¦€</div>
                    </div>
                    <p class="text-gray-600">æ¬¢è¿æ¥åˆ°éé—å·¥åŠï¼è¿™é‡Œæœ‰ä¸ƒä¸ªç¥å¥‡çš„ä½“éªŒåŒºï¼Œè®©æˆ‘ä»¬ä¸€èµ·å”¤é†’ä¸ƒè‰ºä¹‹é­‚å§ï¼</p>
                </div>
                
                <!-- è¿›åº¦æ¡ -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm text-gray-600">ä½“éªŒè¿›åº¦</span>
                        <span class="text-sm text-gray-600" id="progressText">0/7</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3">
                        <div class="bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full progress-bar" style="width: 0%" id="progressBar"></div>
                    </div>
                </div>
                
                <!-- ä¸ƒè‰ºä½“éªŒåŒº -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="artExperiences">
                    <!-- ä½“éªŒå¡ç‰‡ä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="text-center mt-8">
                    <button id="nextToTreasure" onclick="showTreasureScene()" class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-8 py-3 rounded-full font-medium hover:from-yellow-500 hover:to-orange-600 transition-all transform hover:scale-105 hidden">
                        å‰å¾€å®ç®±é€‰æ‹©
                    </button>
                </div>
            </div>
        </div>
        
        <!-- å®ç®±é€‰æ‹©åœºæ™¯ -->
        <div id="treasureScene" class="scene hidden">
            <div class="bg-white rounded-xl shadow-xl p-8">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">ç§˜å¢ƒå®ç®±</h2>
                    <div class="pengzi-chat inline-block mb-4">
                        <div class="bg-orange-400 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl mb-2">ğŸ¦€</div>
                    </div>
                    <div class="bg-blue-50 rounded-lg p-4 mb-4">
                        <p class="text-gray-700" id="treasureRecommendation">æ ¹æ®ä½ çš„ä½“éªŒè¡¨ç°ï¼Œæˆ‘æ¨èä½ é€‰æ‹©...</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="treasureBoxes">
                    <!-- å®ç®±ä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="text-center mt-6">
                    <button onclick="openSelectedBoxes()" class="bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition-colors">
                        æ‰“å¼€é€‰ä¸­çš„å®ç®±
                    </button>
                </div>
            </div>
        </div>
        
        <!-- è¯¾åæ¢å®åœºæ™¯ -->
        <div id="afterScene" class="scene hidden">
            <div class="bg-white rounded-xl shadow-xl p-8">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">éé—ç§˜å¢ƒæ¢å®</h2>
                    <div class="pengzi-chat inline-block mb-4">
                        <div class="bg-orange-400 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl mb-2">ğŸ¦€</div>
                    </div>
                    <p class="text-gray-600">æ­å–œä½ è·å¾—äº†ç§˜å¢ƒä¹‹é’¥ï¼å¿«å»å®åœ°æ¢è®¿çœŸæ­£çš„éé—ä¼ æ‰¿åœ°å§ï¼</p>
                </div>
                
                <div id="secretKeys" class="space-y-4 mb-6">
                    <!-- ç§˜å¢ƒé’¥åŒ™ä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="text-center">
                    <button onclick="showEasterEgg()" class="bg-gradient-to-r from-pink-400 to-purple-500 text-white px-6 py-3 rounded-lg hover:from-pink-500 hover:to-purple-600 transition-all">
                        ğŸ å‘ç°æ›´å¤šå½©è›‹
                    </button>
                    <button onclick="restartGame()" class="ml-4 bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors">
                        é‡æ–°å¼€å§‹æ¸¸æˆ
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ¸¸æˆæ¨¡æ€æ¡† -->
    <div id="gameModal" class="fixed inset-0 bg-black/50 modal hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl max-w-md w-full p-6" id="modalContent">
            <!-- æ¨¡æ€æ¡†å†…å®¹ä¼šåŠ¨æ€æ›´æ–° -->
        </div>
    </div>
    
    <!-- å½©è›‹æ¨¡æ€æ¡† -->
    <div id="easterEggModal" class="fixed inset-0 bg-black/50 modal hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-xl max-w-2xl w-full max-h-96 overflow-y-auto p-6">
            <h3 class="text-xl font-bold mb-4">ğŸŠ æ·±åœ³Â·ä¸­å›½éé—ä¸‡èŠ±ç­’</h3>
            <div class="pengzi-chat text-center mb-4">
                <div class="bg-orange-400 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl mb-2 mx-auto">ğŸ¦€</div>
                <p class="text-sm text-gray-600">å°ä¼ äººï¼Œé¹åŸçš„éé—å®è—å¯ä¸æ­¢è¿™ä¸ƒé¡¹å“¦ï¼çœ‹çœ‹æ›´å¹¿é˜”çš„éé—ä¸–ç•Œå§ï¼</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-blue-50 p-3 rounded-lg text-center">
                    <div class="text-2xl mb-2">ğŸ­</div>
                    <p class="text-sm font-medium">ç²¤å‰§</p>
                    <p class="text-xs text-gray-600">å—å›½çº¢è±†</p>
                </div>
                <div class="bg-green-50 p-3 rounded-lg text-center">
                    <div class="text-2xl mb-2">ğŸ®</div>
                    <p class="text-sm font-medium">æ²™å¤´è§’é±¼ç¯èˆ</p>
                    <p class="text-xs text-gray-600">æµ·ä¸Šæ˜ç </p>
                </div>
                <div class="bg-yellow-50 p-3 rounded-lg text-center">
                    <div class="text-2xl mb-2">ğŸ²</div>
                    <p class="text-sm font-medium">ä¸‹æ²™å¤§ç›†èœ</p>
                    <p class="text-xs text-gray-600">å›´æ‘ç››å®´</p>
                </div>
                <div class="bg-purple-50 p-3 rounded-lg text-center">
                    <div class="text-2xl mb-2">ğŸ¨</div>
                    <p class="text-sm font-medium">æ»¡å ‚çº¢ç“·è‰º</p>
                    <p class="text-xs text-gray-600">çº¢é‡‰å½©ç“·</p>
                </div>
                <div class="bg-pink-50 p-3 rounded-lg text-center">
                    <div class="text-2xl mb-2">ğŸ’Š</div>
                    <p class="text-sm font-medium">å¹³ä¹éƒ­æ°æ­£éª¨</p>
                    <p class="text-xs text-gray-600">æ‚¬å£¶æµä¸–</p>
                </div>
                <div class="bg-indigo-50 p-3 rounded-lg text-center">
                    <div class="text-2xl mb-2">ğŸº</div>
                    <p class="text-sm font-medium">æ›´å¤šéé—...</p>
                    <p class="text-xs text-gray-600">ç­‰ä½ æ¢ç´¢</p>
                </div>
            </div>
            <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-lg text-center">
                <p class="mb-2">ğŸŒŸ æš‘æœŸéé—æ¢é™©å®¶é‚€è¯·</p>
                <p class="text-sm">é€‰æ‹©ä¸€ä¸ªå¿ƒåŠ¨çš„é¡¹ç›®ï¼Œå»å›¾ä¹¦é¦†ã€åšç‰©é¦†æˆ–å®åœ°æ¢è®¿ï¼Œæˆä¸ºå°å°éé—æ¢é™©å®¶å§ï¼</p>
            </div>
            <div class="text-center mt-4">
                <button onclick="closeEasterEgg()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                    å…³é—­
                </button>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆæ•°æ®
        let gameData = {
            preTestAnswers: [],
            artScores: {},
            selectedBoxes: [],
            currentProgress: 0
        };
        
        // ä¸ƒè‰ºæ•°æ®
        const arts = [
            {
                id: 'paper-cutting',
                name: 'ç”°æ°å‰ªçº¸',
                icon: 'âœ‚ï¸',
                color: 'bg-red-500',
                description: 'å·§æ‰‹å‰ªä¹¾å¤',
                location: 'ç½—æ¹–åŒº',
                venue: 'ç½—æ¹–åŒºæ–‡åŒ–é¦†éé—å±•ç¤ºä¸­å¿ƒ',
                address: 'æ·±åœ³å¸‚ç½—æ¹–åŒºæ¡‚å›­è¡—é“',
                activity: 'æ¯å‘¨ä¸‰ä¸‹åˆæœ‰å‰ªçº¸ä½“éªŒè¯¾ç¨‹'
            },
            {
                id: 'qilin-dance',
                name: 'éº’éºŸèˆ',
                icon: 'ğŸ¦„',
                color: 'bg-yellow-500',
                description: 'ç¥¥ç‘è¸é¼“ç‚¹',
                location: 'é¾™å²—åŒº',
                venue: 'é¾™å²—åŒºå‚ç”°éº’éºŸèˆä¼ ä¹ æ‰€',
                address: 'æ·±åœ³å¸‚é¾™å²—åŒºå‚ç”°è¡—é“',
                activity: 'æ¯å‘¨å…­ä¸Šåˆæœ‰éº’éºŸèˆè¡¨æ¼”å’Œæ•™å­¦'
            },
            {
                id: 'fish-lantern',
                name: 'é±¼ç¯èˆ',
                icon: 'ğŸ ',
                color: 'bg-blue-500',
                description: 'é±¼è·ƒé¾™é—¨é˜µ',
                location: 'ç›ç”°åŒº',
                venue: 'ç›ç”°åŒºæ²™å¤´è§’é±¼ç¯èˆä¼ æ‰¿åŸºåœ°',
                address: 'æ·±åœ³å¸‚ç›ç”°åŒºæ²™å¤´è§’è¡—é“',
                activity: 'èŠ‚åº†æœŸé—´æœ‰é±¼ç¯èˆå·¡æ¸¸è¡¨æ¼”'
            },
            {
                id: 'mantis-boxing',
                name: 'è³è‚æ‹³',
                icon: 'ğŸ¥‹',
                color: 'bg-green-500',
                description: 'ä»¿ç”Ÿæ­¦ä¹‹é“',
                location: 'å®å®‰åŒº',
                venue: 'å®å®‰åŒºä¼ ç»Ÿæ­¦æœ¯é¦†',
                address: 'æ·±åœ³å¸‚å®å®‰åŒºæ–°å®‰è¡—é“',
                activity: 'å‘¨æœ«æœ‰è³è‚æ‹³æ•™å­¦è¯¾ç¨‹'
            },
            {
                id: 'hakka-hat',
                name: 'å®¢å®¶å‡‰å¸½',
                icon: 'ğŸ‘’',
                color: 'bg-purple-500',
                description: 'ç»çº¬ç»‡æ¸…å‡‰',
                location: 'é¾™å²—åŒº',
                venue: 'é¾™å²—å®¢å®¶æ°‘ä¿—åšç‰©é¦†',
                address: 'æ·±åœ³å¸‚é¾™å²—åŒºé¾™åŸè¡—é“',
                activity: 'å¯é¢„çº¦ä½“éªŒå‡‰å¸½åˆ¶ä½œå·¥è‰º'
            },
            {
                id: 'sea-urchin-zongzi',
                name: 'æµ·èƒ†ç²½',
                icon: 'ğŸ™',
                color: 'bg-orange-500',
                description: 'å±±æµ·æ»‹å‘³è—',
                location: 'å¤§é¹æ–°åŒº',
                venue: 'å¤§é¹æ‰€åŸéé—ç¾é£Ÿä½“éªŒé¦†',
                address: 'æ·±åœ³å¸‚å¤§é¹æ–°åŒºå¤§é¹æ‰€åŸ',
                activity: 'ç«¯åˆèŠ‚æœŸé—´æœ‰æµ·èƒ†ç²½åˆ¶ä½œä½“éªŒ'
            },
            {
                id: 'woodblock-print',
                name: 'ç‰ˆç”»è‰ºæœ¯',
                icon: 'ğŸ–¼ï¸',
                color: 'bg-indigo-500',
                description: 'åˆ»å°æ–°ç¯‡ç« ',
                location: 'é¾™å²—åŒº',
                venue: 'è§‚æ¾œç‰ˆç”»åŸåˆ›äº§ä¸šåŸºåœ°',
                address: 'æ·±åœ³å¸‚é¾™å²—åŒºè§‚æ¾œè¡—é“',
                activity: 'ç‰ˆç”»å·¥åŠå¸¸å¹´å¼€æ”¾ä½“éªŒ'
            }
        ];
        
        // è¯¾å‰æµ‹è¯•é€‰é¡¹ï¼ˆåŒ…å«å¹²æ‰°é¡¹ï¼‰
        const preTestOptions = [
            { name: 'ç”°æ°å‰ªçº¸', correct: true, icon: 'âœ‚ï¸' },
            { name: 'éº’éºŸèˆ', correct: true, icon: 'ğŸ¦„' },
            { name: 'é±¼ç¯èˆ', correct: true, icon: 'ğŸ ' },
            { name: 'è³è‚æ‹³', correct: true, icon: 'ğŸ¥‹' },
            { name: 'å®¢å®¶å‡‰å¸½', correct: true, icon: 'ğŸ‘’' },
            { name: 'æµ·èƒ†ç²½', correct: true, icon: 'ğŸ™' },
            { name: 'ç‰ˆç”»è‰ºæœ¯', correct: true, icon: 'ğŸ–¼ï¸' },
            { name: 'ç²¤å‰§', correct: false, icon: 'ğŸ­' },
            { name: 'ä½›å±±é†’ç‹®', correct: false, icon: 'ğŸ¦' },
            { name: 'æ½®æ±•è‹±æ­Œèˆ', correct: false, icon: 'ğŸ¥' }
        ];
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            hideAllScenes();
            document.getElementById('preTestScene').classList.remove('hidden');
            initPreTest();
        }
        
        // åˆå§‹åŒ–è¯¾å‰æµ‹è¯•
        function initPreTest() {
            const container = document.getElementById('preTestOptions');
            container.innerHTML = '';
            
            preTestOptions.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'game-card bg-gray-50 border-2 border-gray-200 rounded-lg p-4 text-center cursor-pointer hover:border-blue-400 transition-all';
                optionDiv.onclick = () => togglePreTestOption(index, optionDiv);
                
                optionDiv.innerHTML = `
                    <div class="text-3xl mb-2">${option.icon}</div>
                    <p class="text-sm font-medium">${option.name}</p>
                `;
                
                container.appendChild(optionDiv);
            });
        }
        
        // åˆ‡æ¢è¯¾å‰æµ‹è¯•é€‰é¡¹
        function togglePreTestOption(index, element) {
            if (gameData.preTestAnswers.includes(index)) {
                gameData.preTestAnswers = gameData.preTestAnswers.filter(i => i !== index);
                element.classList.remove('border-blue-500', 'bg-blue-50');
                element.classList.add('border-gray-200', 'bg-gray-50');
            } else {
                gameData.preTestAnswers.push(index);
                element.classList.remove('border-gray-200', 'bg-gray-50');
                element.classList.add('border-blue-500', 'bg-blue-50');
            }
        }
        
        // æäº¤è¯¾å‰æµ‹è¯•
        function submitPreTest() {
            let feedback = '';
            const correctCount = gameData.preTestAnswers.filter(i => preTestOptions[i].correct).length;
            
            if (correctCount >= 5) {
                feedback = 'å“‡ï¼ä½ è¿è¿™ä¹ˆå¤šéƒ½çŸ¥é“ï¼Œä¸æ„§æ˜¯æœªæ¥å®ˆæŠ¤è€…ï¼';
            } else if (correctCount >= 3) {
                feedback = 'ä¸é”™ä¸é”™ï¼çœ‹æ¥ä½ å¯¹é¹åŸéé—æœ‰ä¸€å®šäº†è§£å‘¢ï¼';
            } else {
                feedback = 'å“¦ï¼Ÿçœ‹æ¥æœ‰å¾ˆå¤šç¥ç§˜çš„è‰ºæœ¯ç­‰ç€æˆ‘ä»¬ä¸€èµ·æ¢ç´¢å‘¢ï¼';
            }
            
            showModal('è¯¾å‰æµ‹è¯•ç»“æœ', `
                <div class="text-center">
                    <div class="bg-orange-400 text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl mb-4 mx-auto">ğŸ¦€</div>
                    <p class="mb-4">${feedback}</p>
                    <p class="text-sm text-gray-600 mb-4">ä½ ç­”å¯¹äº† ${correctCount}/7 ä¸ªæ·±åœ³éé—é¡¹ç›®</p>
                    <button onclick="closeModal(); startExperience();" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        å¼€å§‹éé—ä½“éªŒ
                    </button>
                </div>
            `);
        }
        
        // å¼€å§‹ä½“éªŒé˜¶æ®µ
        function startExperience() {
            hideAllScenes();
            document.getElementById('experienceScene').classList.remove('hidden');
            initArtExperiences();
        }
        
        // åˆå§‹åŒ–è‰ºæœ¯ä½“éªŒ
        function initArtExperiences() {
            const container = document.getElementById('artExperiences');
            container.innerHTML = '';
            
            arts.forEach(art => {
                const artDiv = document.createElement('div');
                artDiv.className = `game-card ${art.color} text-white rounded-lg p-6 cursor-pointer hover:shadow-lg transition-all`;
                artDiv.onclick = () => startArtGame(art);
                
                artDiv.innerHTML = `
                    <div class="text-4xl mb-3 text-center">${art.icon}</div>
                    <h3 class="text-lg font-bold mb-2">${art.name}</h3>
                    <p class="text-sm opacity-90 mb-2">${art.description}</p>
                    <p class="text-xs opacity-75">${art.location}</p>
                    <div class="mt-4 text-center">
                        <span class="text-xs bg-white/20 px-3 py-1 rounded-full">
                            ${gameData.artScores[art.id] ? 'å·²å®Œæˆ' : 'ç‚¹å‡»ä½“éªŒ'}
                        </span>
                    </div>
                `;
                
                if (gameData.artScores[art.id]) {
                    artDiv.style.opacity = '0.7';
                    artDiv.onclick = null;
                }
                
                container.appendChild(artDiv);
            });
        }
        
        // å¼€å§‹è‰ºæœ¯æ¸¸æˆ
        function startArtGame(art) {
            let gameContent = '';
            
            switch(art.id) {
                case 'paper-cutting':
                    gameContent = createPaperCuttingGame(art);
                    break;
                case 'qilin-dance':
                    gameContent = createQilinDanceGame(art);
                    break;
                case 'fish-lantern':
                    gameContent = createFishLanternGame(art);
                    break;
                case 'mantis-boxing':
                    gameContent = createMantisBoxingGame(art);
                    break;
                case 'hakka-hat':
                    gameContent = createHakkaHatGame(art);
                    break;
                case 'sea-urchin-zongzi':
                    gameContent = createSeaUrchinZongziGame(art);
                    break;
                case 'woodblock-print':
                    gameContent = createWoodblockPrintGame(art);
                    break;
            }
            
            showModal(art.name + ' - ' + art.description, gameContent);
        }
        
        // å‰ªçº¸æ¸¸æˆ
        function createPaperCuttingGame(art) {
            return `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <p class="mb-4">å°†ç¢ç‰‡æ‹¼æˆå®Œæ•´çš„å‰ªçº¸å›¾æ¡ˆï¼</p>
                    <div class="grid grid-cols-3 gap-2 mb-4">
                        <div class="bg-red-100 h-16 rounded flex items-center justify-center cursor-pointer border-2 border-dashed border-red-300" onclick="selectPiece(this, 1)">ç‰‡1</div>
                        <div class="bg-red-100 h-16 rounded flex items-center justify-center cursor-pointer border-2 border-dashed border-red-300" onclick="selectPiece(this, 2)">ç‰‡2</div>
                        <div class="bg-red-100 h-16 rounded flex items-center justify-center cursor-pointer border-2 border-dashed border-red-300" onclick="selectPiece(this, 3)">ç‰‡3</div>
                        <div class="bg-red-100 h-16 rounded flex items-center justify-center cursor-pointer border-2 border-dashed border-red-300" onclick="selectPiece(this, 4)">ç‰‡4</div>
                        <div class="bg-red-200 h-16 rounded flex items-center justify-center text-red-800">â€</div>
                        <div class="bg-red-100 h-16 rounded flex items-center justify-center cursor-pointer border-2 border-dashed border-red-300" onclick="selectPiece(this, 5)">ç‰‡5</div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">ç‚¹å‡»é¡ºåºï¼š1 â†’ 2 â†’ 3 â†’ 4 â†’ 5</p>
                    <button onclick="completeArtGame('${art.id}', Math.floor(Math.random() * 20) + 80)" class="bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors">
                        å®Œæˆæ‹¼å›¾
                    </button>
                </div>
            `;
        }
        
        // éº’éºŸèˆæ¸¸æˆ
        function createQilinDanceGame(art) {
            return `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <p class="mb-4">è·Ÿç€é¼“ç‚¹èŠ‚æ‹èˆåŠ¨éº’éºŸï¼</p>
                    <div class="mb-4">
                        <div class="flex justify-center space-x-2 mb-4">
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center border-4 border-yellow-300 cursor-pointer hover:bg-yellow-200" onclick="beatDrum(this)">é¼“</div>
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center border-4 border-yellow-300 cursor-pointer hover:bg-yellow-200" onclick="beatDrum(this)">é¼“</div>
                        </div>
                        <p class="text-sm text-gray-600">æŒ‰èŠ‚æ‹æ•²å‡»ï¼å’š-å’š-å‘›-å’šï¼</p>
                    </div>
                    <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                        <p class="text-sm">ğŸµ éº’éºŸå‡ºæ´ã€éº’éºŸé‡‡é’ã€éº’éºŸæˆç ...</p>
                    </div>
                    <button onclick="completeArtGame('${art.id}', Math.floor(Math.random() * 20) + 85)" class="bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                        å®Œæˆè¡¨æ¼”
                    </button>
                </div>
            `;
        }
        
        // é±¼ç¯èˆæ¸¸æˆ
        function createFishLanternGame(art) {
            return `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <p class="mb-4">æ§åˆ¶é±¼ç¯ç©¿è¶Šå··é“ï¼Œç‚¹äº®ç¥ˆç¦ç¯ç¬¼ï¼</p>
                    <div class="relative bg-blue-50 p-4 rounded-lg mb-4 h-32">
                        <div class="absolute top-2 left-2 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white cursor-pointer" id="fishLantern">ğŸ </div>
                        <div class="absolute top-2 right-2 w-8 h-8 bg-yellow-300 rounded-full flex items-center justify-center">ğŸ®</div>
                        <div class="absolute bottom-2 left-1/2 w-8 h-8 bg-yellow-300 rounded-full flex items-center justify-center">ğŸ®</div>
                        <div class="absolute top-1/2 right-8 w-8 h-8 bg-yellow-300 rounded-full flex items-center justify-center">ğŸ®</div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">ä½¿ç”¨æ–¹å‘é”®æˆ–ç‚¹å‡»æ§åˆ¶é±¼ç¯ç§»åŠ¨</p>
                    <button onclick="completeArtGame('${art.id}', Math.floor(Math.random() * 20) + 82)" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        å®Œæˆæ¸¸æˆ
                    </button>
                </div>
            `;
        }
        
        // è³è‚æ‹³æ¸¸æˆ
        function createMantisBoxingGame(art) {
            return `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <p class="mb-4">å­¦ä¹ è³è‚æ‹³çš„ç»å…¸æ‹›å¼ï¼</p>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div class="bg-green-50 p-4 rounded-lg border-2 border-green-200">
                            <div class="text-2xl mb-2">ğŸ¦‚</div>
                            <p class="text-sm font-medium">è³è‚æ•è‰</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border-2 border-green-200">
                            <div class="text-2xl mb-2">ğŸ¤²</div>
                            <p class="text-sm font-medium">å‹¾æ‚é‡‡æ‰‹</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border-2 border-green-200">
                            <div class="text-2xl mb-2">âš¡</div>
                            <p class="text-sm font-medium">é—ªèº«é æ‰“</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border-2 border-green-200">
                            <div class="text-2xl mb-2">ğŸ”„</div>
                            <p class="text-sm font-medium">è¿›é€€èº«æ³•</p>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">è§‚å¯Ÿæ‹›å¼ï¼Œä½“ä¼šè±¡å½¢å–æ„çš„ç²¾é«“</p>
                    <button onclick="completeArtGame('${art.id}', Math.floor(Math.random() * 20) + 79)" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">
                        å®Œæˆç»ƒä¹ 
                    </button>
                </div>
            `;
        }
        
        // å®¢å®¶å‡‰å¸½æ¸¸æˆ
        function createHakkaHatGame(art) {
            return `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <p class="mb-4">é€‰æ‹©æ­£ç¡®çš„ææ–™åˆ¶ä½œå®¢å®¶å‡‰å¸½ï¼</p>
                    <div class="mb-4">
                        <h4 class="text-sm font-medium mb-2">é€‰æ‹©ææ–™ï¼š</h4>
                        <div class="grid grid-cols-3 gap-2">
                            <div class="bg-yellow-100 p-3 rounded cursor-pointer border-2 border-yellow-200 hover:border-yellow-400" onclick="selectMaterial(this, true)">
                                <div class="text-lg mb-1">ğŸ‹</div>
                                <p class="text-xs">ç«¹ç¯¾</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded cursor-pointer border-2 border-blue-200 hover:border-blue-400" onclick="selectMaterial(this, true)">
                                <div class="text-lg mb-1">ğŸ§µ</div>
                                <p class="text-xs">å½©çº¿</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded cursor-pointer border-2 border-purple-200 hover:border-purple-400" onclick="selectMaterial(this, true)">
                                <div class="text-lg mb-1">ğŸ§¶</div>
                                <p class="text-xs">å¸ƒæ–™</p>
                            </div>
                            <div class="bg-gray-100 p-3 rounded cursor-pointer border-2 border-gray-200 hover:border-gray-400" onclick="selectMaterial(this, false)">
                                <div class="text-lg mb-1">ğŸª¨</div>
                                <p class="text-xs">çŸ³å¤´</p>
                            </div>
                            <div class="bg-red-100 p-3 rounded cursor-pointer border-2 border-red-200 hover:border-red-400" onclick="selectMaterial(this, false)">
                                <div class="text-lg mb-1">ğŸ§±</div>
                                <p class="text-xs">ç –å—</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded cursor-pointer border-2 border-green-200 hover:border-green-400" onclick="selectMaterial(this, false)">
                                <div class="text-lg mb-1">ğŸ¥¬</div>
                                <p class="text-xs">è”¬èœ</p>
                            </div>
                        </div>
                    </div>
                    <button onclick="completeArtGame('${art.id}', Math.floor(Math.random() * 20) + 83)" class="bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-colors">
                        å®Œæˆåˆ¶ä½œ
                    </button>
                </div>
            `;
        }
        
        // æµ·èƒ†ç²½æ¸¸æˆ
        function createSeaUrchinZongziGame(art) {
            return `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <p class="mb-4">æŒ‰æ­£ç¡®é¡ºåºåˆ¶ä½œæµ·èƒ†ç²½ï¼</p>
                    <div class="space-y-2 mb-4">
                        <div class="bg-orange-50 p-3 rounded-lg border-l-4 border-orange-400 text-left">
                            <span class="text-sm font-medium">1. æ¸…æ´—æ–°é²œæµ·èƒ†</span>
                        </div>
                        <div class="bg-orange-50 p-3 rounded-lg border-l-4 border-orange-400 text-left">
                            <span class="text-sm font-medium">2. ç‚’åˆ¶ç³¯ç±³</span>
                        </div>
                        <div class="bg-orange-50 p-3 rounded-lg border-l-4 border-orange-400 text-left">
                            <span class="text-sm font-medium">3. ç²½å¶åŒ…é¦…</span>
                        </div>
                        <div class="bg-orange-50 p-3 rounded-lg border-l-4 border-orange-400 text-left">
                            <span class="text-sm font-medium">4. ç»³å­æ†æ‰</span>
                        </div>
                        <div class="bg-orange-50 p-3 rounded-lg border-l-4 border-orange-400 text-left">
                            <span class="text-sm font-medium">5. ä¸‹é”…è’¸ç…®</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-600 mb-4">ä½“éªŒç‹¬ç‰¹çš„æµ·é²œé£å‘³ç²½å­åˆ¶ä½œå·¥è‰º</p>
                    <button onclick="completeArtGame('${art.id}', Math.floor(Math.random() * 20) + 81)" class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors">
                        å®Œæˆåˆ¶ä½œ
                    </button>
                </div>
            `;
        }
        
        // ç‰ˆç”»æ¸¸æˆ
        function createWoodblockPrintGame(art) {
            return `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <p class="mb-4">ä½“éªŒç‰ˆç”»çš„åˆ»å°è¿‡ç¨‹ï¼</p>
                    <div class="mb-4">
                        <div class="bg-indigo-50 p-4 rounded-lg mb-4">
                            <div class="grid grid-cols-4 gap-1 mb-2">
                                <div class="h-6 bg-indigo-200 rounded"></div>
                                <div class="h-6 bg-indigo-100 rounded"></div>
                                <div class="h-6 bg-indigo-200 rounded"></div>
                                <div class="h-6 bg-indigo-100 rounded"></div>
                                <div class="h-6 bg-indigo-100 rounded"></div>
                                <div class="h-6 bg-indigo-300 rounded"></div>
                                <div class="h-6 bg-indigo-300 rounded"></div>
                                <div class="h-6 bg-indigo-200 rounded"></div>
                            </div>
                            <p class="text-xs text-gray-600">å¤§é¹æ‰€åŸç‰ˆç”»æ•ˆæœ</p>
                        </div>
                        <div class="flex justify-center space-x-4">
                            <button class="bg-indigo-200 px-3 py-1 rounded text-sm hover:bg-indigo-300 transition-colors" onclick="selectTool('åˆ»åˆ€')">ğŸ”ª åˆ»åˆ€</button>
                            <button class="bg-indigo-200 px-3 py-1 rounded text-sm hover:bg-indigo-300 transition-colors" onclick="selectTool('æ²¹å¢¨')">ğŸ¨ æ²¹å¢¨</button>
                            <button class="bg-indigo-200 px-3 py-1 rounded text-sm hover:bg-indigo-300 transition-colors" onclick="selectTool('æ‹“åŒ…')">âš« æ‹“åŒ…</button>
                        </div>
                    </div>
                    <button onclick="completeArtGame('${art.id}', Math.floor(Math.random() * 20) + 84)" class="bg-indigo-500 text-white px-6 py-2 rounded-lg hover:bg-indigo-600 transition-colors">
                        å®Œæˆç‰ˆç”»
                    </button>
                </div>
            `;
        }
        
        // å®Œæˆè‰ºæœ¯æ¸¸æˆ
        function completeArtGame(artId, score) {
            gameData.artScores[artId] = score;
            gameData.currentProgress++;
            
            updateProgress();
            
            const art = arts.find(a => a.id === artId);
            
            showModal('æ¸¸æˆå®Œæˆï¼', `
                <div class="text-center">
                    <div class="text-4xl mb-4">${art.icon}</div>
                    <h3 class="text-lg font-bold mb-2">${art.name}</h3>
                    <div class="bg-green-100 border border-green-400 rounded-lg p-4 mb-4">
                        <p class="text-green-800 font-medium mb-2">æ­å–œå®Œæˆä½“éªŒï¼</p>
                        <p class="text-green-700">ä½ çš„å¾—åˆ†ï¼š${score}/100</p>
                    </div>
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-4">
                        <div class="bg-orange-400 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl mb-2 mx-auto">ğŸ¦€</div>
                        <p class="text-sm text-gray-700">é¹ä»”ï¼šå¤ªæ£’äº†ï¼ä½ å·²ç»åˆæ­¥æŒæ¡äº†${art.name}çš„ç²¾é«“ï¼</p>
                    </div>
                    <button onclick="closeModal(); initArtExperiences();" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        ç»§ç»­æ¢ç´¢
                    </button>
                </div>
            `);
        }
        
        // æ›´æ–°è¿›åº¦
        function updateProgress() {
            const progress = (gameData.currentProgress / 7) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${gameData.currentProgress}/7`;
            
            if (gameData.currentProgress === 7) {
                document.getElementById('nextToTreasure').classList.remove('hidden');
            }
        }
        
        // æ˜¾ç¤ºå®ç®±é€‰æ‹©åœºæ™¯
        function showTreasureScene() {
            hideAllScenes();
            document.getElementById('treasureScene').classList.remove('hidden');
            initTreasureScene();
        }
        
        // åˆå§‹åŒ–å®ç®±åœºæ™¯
        function initTreasureScene() {
            // æ‰¾å‡ºå¾—åˆ†æœ€é«˜çš„è‰ºæœ¯
            let bestArt = null;
            let bestScore = 0;
            
            Object.entries(gameData.artScores).forEach(([artId, score]) => {
                if (score > bestScore) {
                    bestScore = score;
                    bestArt = arts.find(a => a.id === artId);
                }
            });
            
            // è®¾ç½®æ¨èæ–‡æœ¬
            const recommendationEl = document.getElementById('treasureRecommendation');
            if (bestArt) {
                recommendationEl.textContent = `æ ¹æ®ä½ çš„ä½“éªŒè¡¨ç°ï¼Œä½ åœ¨ã€${bestArt.name}ã€‘ä¸Šå±•ç°äº†éå‡¡çš„å¤©èµ‹ï¼å¾—åˆ†ï¼š${bestScore}/100ã€‚æˆ‘æ¨èä½ é€‰æ‹©å®ƒçš„å®ç®±ï¼Œæˆ–è€…è·Ÿéšå†…å¿ƒé€‰æ‹©ä½ æœ€æ„Ÿå…´è¶£çš„è‰ºæœ¯ï¼`;
            }
            
            // ç”Ÿæˆå®ç®±
            const container = document.getElementById('treasureBoxes');
            container.innerHTML = '';
            
            arts.forEach(art => {
                const boxDiv = document.createElement('div');
                boxDiv.className = `treasure-box cursor-pointer p-4 rounded-lg border-4 transition-all ${
                    art.id === bestArt?.id ? 'border-yellow-400 bg-yellow-50' : 'border-gray-300 bg-white'
                }`;
                boxDiv.onclick = () => toggleTreasureBox(art.id, boxDiv);
                
                boxDiv.innerHTML = `
                    <div class="text-center">
                        <div class="text-3xl mb-2">ğŸ“¦</div>
                        <div class="text-2xl mb-2">${art.icon}</div>
                        <p class="text-sm font-medium">${art.name}</p>
                        ${art.id === bestArt?.id ? '<p class="text-xs text-yellow-600 mt-1">æ¨è</p>' : ''}
                    </div>
                `;
                
                container.appendChild(boxDiv);
            });
        }
        
        // åˆ‡æ¢å®ç®±é€‰æ‹©
        function toggleTreasureBox(artId, element) {
            if (gameData.selectedBoxes.includes(artId)) {
                gameData.selectedBoxes = gameData.selectedBoxes.filter(id => id !== artId);
                element.classList.remove('border-purple-500', 'bg-purple-50');
                element.classList.add('border-gray-300', 'bg-white');
            } else {
                gameData.selectedBoxes.push(artId);
                element.classList.remove('border-gray-300', 'bg-white');
                element.classList.add('border-purple-500', 'bg-purple-50');
            }
        }
        
        // æ‰“å¼€é€‰ä¸­çš„å®ç®±
        function openSelectedBoxes() {
            if (gameData.selectedBoxes.length === 0) {
                alert('è¯·å…ˆé€‰æ‹©è‡³å°‘ä¸€ä¸ªå®ç®±ï¼');
                return;
            }
            
            hideAllScenes();
            document.getElementById('afterScene').classList.remove('hidden');
            generateSecretKeys();
        }
        
        // ç”Ÿæˆç§˜å¢ƒé’¥åŒ™
        function generateSecretKeys() {
            const container = document.getElementById('secretKeys');
            container.innerHTML = '';
            
            gameData.selectedBoxes.forEach(artId => {
                const art = arts.find(a => a.id === artId);
                
                const keyDiv = document.createElement('div');
                keyDiv.className = 'bg-gradient-to-r from-yellow-100 to-orange-100 border border-yellow-300 rounded-lg p-6';
                
                keyDiv.innerHTML = `
                    <div class="flex items-start space-x-4">
                        <div class="text-4xl">${art.icon}</div>
                        <div class="flex-1">
                            <h3 class="text-lg font-bold text-gray-800 mb-2">${art.name} ç§˜å¢ƒä¹‹é’¥ ğŸ—ï¸</h3>
                            <div class="space-y-2 text-sm">
                                <p><span class="font-medium">ä¼ æ‰¿åŸºåœ°ï¼š</span>${art.venue}</p>
                                <p><span class="font-medium">åœ°å€ï¼š</span>${art.address}</p>
                                <p><span class="font-medium">æ¨èæ´»åŠ¨ï¼š</span>${art.activity}</p>
                            </div>
                            <div class="mt-3 bg-yellow-200 rounded-lg p-3">
                                <p class="text-xs text-yellow-800">ğŸ’¡ å¿«å¸¦ç€è¿™æŠŠé’¥åŒ™ï¼Œåœ¨è¯¾åæˆ–å‡æœŸå»å®åœ°æ¢è®¿å§ï¼é‚£é‡Œæœ‰çœŸæ­£çš„ä¼ æ‰¿äººåœ¨ç­‰ç€ä½ ï¼</p>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(keyDiv);
            });
        }
        
        // æ˜¾ç¤ºå½©è›‹
        function showEasterEgg() {
            document.getElementById('easterEggModal').classList.remove('hidden');
        }
        
        // å…³é—­å½©è›‹
        function closeEasterEgg() {
            document.getElementById('easterEggModal').classList.add('hidden');
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            gameData = {
                preTestAnswers: [],
                artScores: {},
                selectedBoxes: [],
                currentProgress: 0
            };
            
            hideAllScenes();
            document.getElementById('introScene').classList.remove('hidden');
            
            // é‡ç½®è¿›åº¦æ¡
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('progressText').textContent = '0/7';
            document.getElementById('nextToTreasure').classList.add('hidden');
        }
        
        // å·¥å…·å‡½æ•°
        function hideAllScenes() {
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.add('hidden');
            });
        }
        
        function showModal(title, content) {
            document.getElementById('modalContent').innerHTML = `
                <h3 class="text-xl font-bold mb-4">${title}</h3>
                ${content}
            `;
            document.getElementById('gameModal').classList.remove('hidden');
        }
        
        function closeModal() {
            document.getElementById('gameModal').classList.add('hidden');
        }
        
        // æ¸¸æˆè¾…åŠ©å‡½æ•°
        function selectPiece(element, number) {
            element.style.backgroundColor = '#fef2f2';
            element.style.borderColor = '#f87171';
            element.innerHTML = 'âœ“';
        }
        
        function beatDrum(element) {
            element.style.animation = 'pulse 0.3s';
            setTimeout(() => {
                element.style.animation = '';
            }, 300);
        }
        
        function selectMaterial(element, isCorrect) {
            if (isCorrect) {
                element.style.borderColor = '#10b981';
                element.style.backgroundColor = '#d1fae5';
            } else {
                element.style.borderColor = '#ef4444';
                element.style.backgroundColor = '#fee2e2';
            }
        }
        
        function selectTool(tool) {
            console.log('é€‰æ‹©å·¥å…·ï¼š', tool);
        }
        
        
    </script>
</body>
</html>
