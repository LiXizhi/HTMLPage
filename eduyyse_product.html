
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>产品中心 - 青少年科技与工程教育解决方案</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .header {
            background: linear-gradient(135deg, #1976d2, #2196f3);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .tab-container {
            display: flex;
            overflow-x: auto;
            background: white;
            position: sticky;
            top: 0;
            z-index: 10;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .tab {
            padding: 15px 20px;
            font-size: 15px;
            white-space: nowrap;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            color: #1976d2;
            border-bottom-color: #1976d2;
            font-weight: 500;
        }
        
        .content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .product-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
        }
        
        .product-image {
            height: 180px;
            background-color: #e3f2fd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1976d2;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }
        
        .product-info {
            padding: 16px;
        }
        
        .product-info h3 {
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .product-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 10px;
        }
        
        .tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .product-desc {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .product-desc strong {
            font-weight: 700;
        }
        
        .view-btn {
            display: inline-block;
            padding: 8px 16px;
            background: #1976d2;
            color: white;
            border-radius: 4px;
            font-size: 14px;
            text-decoration: none;
            transition: background 0.3s ease;
        }
        
        .view-btn:hover {
            background: #1565c0;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            max-width: 800px;
            margin: 20px auto;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s ease;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-40%); }
            to { opacity: 1; transform: translateY(-50%); }
        }
        
        .modal-header {
            padding: 16px 20px;
            background: #1976d2;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: 500;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            line-height: 1;
        }
        
        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .modal-image-container {
            width: 100%;
            position: relative;
            margin-bottom: 20px;
        }
        
        .modal-image-container::before {
            content: "";
            display: block;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
        }
        
        .modal-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #e3f2fd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1976d2;
            font-weight: bold;
            overflow: hidden;
        }
        
        .modal-desc {
            line-height: 1.8;
            color: #444;
            margin-bottom: 20px;
        }
        
        .modal-desc strong {
            font-weight: 700;
        }
        
        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .url-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #1976d2;
            color: white;
            border-radius: 4px;
            font-size: 14px;
            text-decoration: none;
            transition: background 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .url-btn:hover {
            background: #1565c0;
        }
        
        /* Loading indicator */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            font-size: 18px;
            color: #1976d2;
        }
        
        .spinner {
            border: 4px solid rgba(25, 118, 210, 0.2);
            border-left: 4px solid #1976d2;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            }
            
            .tab {
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .modal-content {
                margin: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>产品中心</h1>
        <p>提供全面的青少年科技与工程教育解决方案，助力培养未来创新人才</p>
    </div>
    
    <div class="tab-container" id="tabContainer">
        <!-- Tabs will be generated dynamically -->
    </div>
    
    <div class="content" id="contentContainer">
        <div class="loading">
            <div class="spinner"></div>
            <span>正在加载产品数据...</span>
        </div>
        <!-- Tab content will be generated dynamically -->
    </div>
    
    <!-- 模态框 -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">产品标题</h3>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-image-container">
                    <div class="modal-image" id="modalImage"></div>
                </div>
                <div class="modal-desc" id="modalDesc">产品详细描述内容...</div>
                <div class="modal-actions">
                    <button class="url-btn" id="modalUrlBtn">访问网址</button>
                    <button class="url-btn" id="contactBtn">联系我们</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 解析Markdown格式的产品配置
        function parseProductConfig(config) {
            const lines = config.trim().split('\n');
            const categories = {};
            let currentCategory = null;
            let currentProduct = null;

            for (let line of lines) {
                line = line.trim();
                if (!line) continue;

                // 解析大类（如"课程产品"）
                if (line.startsWith('## ')) {
                    currentCategory = line.substring(3).trim();
                    categories[currentCategory] = [];
                    currentProduct = null;
                } 
                // 解析产品名称
                else if (line.startsWith('### ') && currentCategory) {
                    currentProduct = {
                        title: line.substring(4).trim(),
                        properties: {}
                    };
                    categories[currentCategory].push(currentProduct);
                } 
                // 解析产品属性
                else if (line.startsWith('- ') && currentProduct) {
                    const [key, value] = line.substring(2).split(': ');
                    if (key === 'tag') {
                        currentProduct.properties[key] = value.split(',');
                    } else {
                        currentProduct.properties[key] = value;
                    }
                }
            }

            return categories;
        }

        // 生成标签页和内容
        function generateTabs(categories) {
            const tabContainer = document.getElementById('tabContainer');
            const contentContainer = document.getElementById('contentContainer');
            
            // 清空加载提示和之前的内容
            contentContainer.innerHTML = '';
            tabContainer.innerHTML = '';
            
            // 生成标签页
            let isFirst = true;
            Object.keys(categories).forEach(category => {
                const tabElement = document.createElement('div');
                tabElement.className = `tab ${isFirst ? 'active' : ''}`;
                tabElement.setAttribute('data-tab', category);
                tabElement.textContent = category;
                tabContainer.appendChild(tabElement);
                
                // 生成对应的内容区域
                const contentElement = document.createElement('div');
                contentElement.className = 'tab-content';
                contentElement.id = category;
                contentElement.style.display = isFirst ? 'block' : 'none';
                
                const productGrid = document.createElement('div');
                productGrid.className = 'product-grid';
                
                // 为每个分类生成产品卡片
                categories[category].forEach(product => {
                    const productCard = createProductCard(product);
                    productGrid.appendChild(productCard);
                });
                
                contentElement.appendChild(productGrid);
                contentContainer.appendChild(contentElement);
                
                isFirst = false;
            });
        }

        // 创建产品卡片
        function createProductCard(product) {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.setAttribute('data-title', product.title);
            
            // 创建产品描述，标题加粗
            const descWithBoldTitle = product.properties.desc.replace(
                product.title,
                `<strong>${product.title}</strong>`
            );
            card.setAttribute('data-desc', descWithBoldTitle);
            
            // 保存URL属性（如果有）
            if (product.properties.url) {
                card.setAttribute('data-url', product.properties.url);
            }
            
            // 创建图片区域
            const imageDiv = document.createElement('div');
            imageDiv.className = 'product-image';
            imageDiv.setAttribute('data-title', product.title);
            
            if (product.properties.image) {
                const img = document.createElement('img');
                img.style.width = '100%';
                img.style.height = '100%';
                img.src = product.properties.image;
                imageDiv.appendChild(img);
            }
            
            // 创建信息区域
            const infoDiv = document.createElement('div');
            infoDiv.className = 'product-info';
            
            // 添加标签
            const tagsDiv = document.createElement('div');
            tagsDiv.className = 'product-tags';
            
            if (product.properties.tag && product.properties.tag.length > 0) {
                product.properties.tag.forEach(tag => {
                    const tagSpan = document.createElement('span');
                    tagSpan.className = 'tag';
                    tagSpan.textContent = tag;
                    tagsDiv.appendChild(tagSpan);
                });
            }
            
            // 添加标题
            const title = document.createElement('h3');
            title.textContent = product.title;
            
            // 添加描述
            const desc = document.createElement('p');
            desc.className = 'product-desc';
            desc.textContent = product.properties.desc;
            
            // 添加查看按钮
            const viewBtn = document.createElement('a');
            viewBtn.className = 'view-btn';
            viewBtn.textContent = '查看详情';
            
            infoDiv.appendChild(tagsDiv);
            infoDiv.appendChild(title);
            infoDiv.appendChild(desc);
            infoDiv.appendChild(viewBtn);
            
            card.appendChild(imageDiv);
            card.appendChild(infoDiv);
            
            return card;
        }

        // 添加标签页点击事件
        function setupTabEvents() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有active类
                    tabs.forEach(t => t.classList.remove('active'));
                    // 给当前点击的tab添加active类
                    this.classList.add('active');
                    
                    // 隐藏所有内容
                    const tabContents = document.querySelectorAll('.tab-content');
                    tabContents.forEach(content => {
                        content.style.display = 'none';
                    });
                    
                    // 显示对应的内容
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).style.display = 'block';
                });
            });
        }

        // 设置模态框功能
        function setupModalEvents() {
            const modal = document.getElementById('productModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalImage = document.getElementById('modalImage');
            const modalDesc = document.getElementById('modalDesc');
            const closeModal = document.getElementById('closeModal');
            const modalUrlBtn = document.getElementById('modalUrlBtn');
            const contactBtn = document.getElementById('contactBtn');
            
            // 为所有产品卡片添加点击事件
            document.addEventListener('click', function(e) {
                if (e.target.closest('.product-card')) {
                    const card = e.target.closest('.product-card');
                    const title = card.getAttribute('data-title');
                    const desc = card.getAttribute('data-desc');
                    const imageTitle = card.querySelector('.product-image').getAttribute('data-title');
                    const imageUrl = card.querySelector('.product-image img')?.src;
                    const productUrl = card.getAttribute('data-url');
                    
                    modalTitle.textContent = title;
                    modalDesc.innerHTML = desc; // 使用innerHTML以支持加粗标记
                    
                    modalImage.innerHTML = '';
                    if (imageUrl) {
                        const img = document.createElement('img');
                        img.style.width = '100%';
                        img.style.height = '100%';
                        img.style.objectFit = 'cover';
                        img.src = imageUrl;
                        modalImage.appendChild(img);
                    }
                    modalImage.setAttribute('data-title', imageTitle);
                    
                    // 处理访问网址按钮
                    if (productUrl) {
                        modalUrlBtn.style.display = 'inline-block';
                        modalUrlBtn.onclick = function() {
                            window.open(productUrl, '_blank');
                        };
                    } else {
                        modalUrlBtn.style.display = 'none';
                    }
                    
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden'; // 防止背景滚动
                }
            });
            
            // 关闭模态框
            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            // 点击模态框外部关闭
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
            // 设置联系我们按钮点击事件
            contactBtn.addEventListener('click', function() {
                alert('请联系 eduyse@163.com');
            });
        }

        // 从远程URL获取产品数据并初始化页面
        function fetchProductData() {
            const dataUrl = 'https://api.keepwork.com/core/v0/repos/eduyse%2Fweb/files/eduyse%2Fweb%2Fproduct_data.md';
            
            fetch(dataUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('网络请求失败');
                    }
                    return response.text();
                })
                .then(data => {
                    // 解析产品配置
                    const categories = parseProductConfig(data);
                    
                    // 生成UI组件
                    generateTabs(categories);
                    
                    // 设置交互事件
                    setupTabEvents();
                    setupModalEvents();
                })
                .catch(error => {
                    console.error('获取产品数据失败:', error);
                    document.getElementById('contentContainer').innerHTML = `
                        <div style="text-align: center; padding: 50px; color: #d32f2f;">
                            <h3>数据加载失败</h3>
                            <p>无法获取产品信息，请稍后再试。</p>
                            <button onclick="fetchProductData()" style="margin-top: 20px; padding: 8px 16px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                重新加载
                            </button>
                        </div>
                    `;
                });
        }

        // 立即执行加载数据
        fetchProductData();
    </script>
</body>
</html>
