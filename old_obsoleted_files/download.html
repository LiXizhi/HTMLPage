<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>éº¦æ€æ˜Ÿçƒ - ä¸‹è½½</title>
    <script src="https://cdn.keepwork.com/keepwork/cdn/tailwindcss@3.4.16.js"></script>
    <script>
      // Global Configuration - å…¨å±€é…ç½®
      const GLOBAL_CONFIG = {
        apkDownloadUrl: "https://cdn.keepwork.com/dist/maseai/maseai-v1.6-10-20251026-1129-master-release.apk",
        webUrl: "https://play.maseai.com",
        webGameUrl: "https://keepwork.com/public/resource/miniGameProxy.html?projectPath=maisi/maisi/webgames/data&gameName=ms_games_login&ver=11",
        iosAppStoreUrl: "https://apps.apple.com/app/6749035691",
        androidPlayStoreUrl: "https://play.google.com/store/apps/details?id=com.maixi.planet",
      };
    </script>
    <style>
      .download-card {
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .download-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .recommended {
        border-color: #3b82f6;
        background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      }

      .secondary-recommended {
        border-color: #10b981;
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      }

      .maixi-qrcode {
        background-image: url("https://api.keepwork.com/ts-storage/siteFiles/46418/raw#qrcodemaisiai.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }
    </style>
  </head>

  <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
      <!-- Download Options Container -->
      <div id="downloadContainer" class="space-y-4">
        <!-- iOS App Store -->
        <div class="download-card bg-white rounded-xl p-6 shadow-lg" data-platform="ios" data-priority="0">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <div class="text-4xl">ğŸ</div>
              <div>
                <h3 class="text-xl font-semibold text-gray-800">iOSç‰ˆæœ¬</h3>
                <p class="text-gray-600">ä»è‹¹æœåº”ç”¨å•†åº—å®‰è£…</p>
                <div class="flex items-center mt-1">
                  <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">æ¨è</span>
                </div>
              </div>
            </div>
            <button class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors" onclick="downloadApp('ios-appstore')">ç«‹å³å®‰è£…</button>
          </div>
        </div>

        <!-- Android APK Direct -->
        <div class="download-card bg-white rounded-xl p-6 shadow-lg" data-platform="android" data-priority="0">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <div class="text-4xl">ğŸ¤–</div>
              <div>
                <h3 class="text-xl font-semibold text-gray-800">Android å®‰å“ç‰ˆæœ¬</h3>
                <p class="text-gray-600">ç›´æ¥ä¸‹è½½å®‰è£…åŒ…, æˆ–ä»å®‰å“åº”ç”¨å•†åº—å®‰è£…</p>
                <div class="flex items-center mt-1">
                  <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">æ¨è</span>
                  <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded ml-1">å¿«é€Ÿ</span>
                </div>
              </div>
            </div>
            <a
              href=""
              class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors inline-flex items-center"
              id="apkDownloadButton"
              download
            >
              ä¸‹è½½APK
            </a>
          </div>
        </div>

        <!-- Android Play Store -->
        <div class="download-card bg-white rounded-xl p-6 shadow-lg" data-platform="android" data-priority="1">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <div class="text-4xl">ğŸ“±</div>
              <div>
                <h3 class="text-xl font-semibold text-gray-800">Google Play</h3>
                <p class="text-gray-600">ä»Googleåº”ç”¨å•†åº—å®‰è£…</p>
              </div>
            </div>
            <button class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors" onclick="downloadApp('android-playstore')">æ‰“å¼€å•†åº—</button>
          </div>
        </div>
        <!-- Web Version -->
        <div class="download-card bg-white rounded-xl p-6 shadow-lg" data-platform="web" data-priority="1">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <div class="text-4xl">ğŸŒ</div>
              <div>
                <h3 class="text-xl font-semibold text-gray-800">ç”µè„‘ç½‘é¡µç‰ˆ</h3>
                <p class="text-gray-600">é¼ æ ‡ã€é”®ç›˜ã€å¤§å±æ›´æŠ¤çœ¼</p>
                <p class="text-sm text-blue-600 font-mono bg-blue-50 px-2 py-1 rounded mt-1" id="webUrlDisplay"></p>
                <div class="flex items-center mt-1">
                  <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded">æ¨è</span>
                  <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded ml-1">æ”¯æŒé¼ æ ‡/é”®ç›˜</span>
                </div>
              </div>
            </div>
            <div class="flex flex-col gap-2" id="webButtonContainer">
              <button class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-colors" onclick="copyWebUrl()">å¤åˆ¶ç½‘å€</button>
            </div>
          </div>
        </div>
        <!-- WeChat Mini Program -->
        <div class="download-card bg-white rounded-xl p-6 shadow-lg" data-platform="wechat" data-priority="2">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <div class="text-4xl">ğŸ’¬</div>
              <div>
                <h3 class="text-xl font-semibold text-gray-800">å¾®ä¿¡æœåŠ¡å·</h3>
                <p class="text-gray-600">æ”¯æŒå¾®ä¿¡PCç‰ˆ/æ‰‹æœºå¤šç«¯ç™»å½•</p>
                <div class="flex items-center mt-2 space-x-3">
                  <div class="w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center border cursor-pointer hover:bg-gray-100 transition-colors maixi-qrcode" onclick="showQRCode()"></div>
                  <div class="text-sm">
                    <p class="text-gray-500">æ‰«æäºŒç»´ç å…³æ³¨</p>
                    <p class="text-blue-600 font-medium">éº¦æ€æ˜Ÿçƒ</p>
                  </div>
                </div>
              </div>
            </div>
            <button class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors" onclick="showQRCode()">æ‰«ç å…³æ³¨</button>
          </div>
        </div>
      </div>

      <!-- Device Info -->
      <div class="mt-8 text-center">
        <div class="bg-white rounded-lg p-4 shadow-md">
          <p class="text-sm text-gray-600">å½“å‰æ£€æµ‹åˆ°çš„è®¾å¤‡: <span id="deviceInfo" class="font-medium text-blue-600"></span></p>
          <p class="text-xs text-gray-500 mt-1">æˆ‘ä»¬å·²ä¸ºæ‚¨ä¼˜åŒ–æ˜¾ç¤ºé¡ºåº</p>
        </div>
      </div>
      <!-- Footer -->
      <div class="mt-12 text-center text-gray-500 text-sm">
        <p>ğŸŒŸ<span class="">éº¦æ€æ˜Ÿçƒ</span>ï¼šè®©æ¯ä¸ªå­©å­åœ¨è‡ªå·±çš„ä¸–ç•Œé‡Œ<span class="shine-text">è‡ªç”±å‘å…‰</span>ğŸŒŸ</p>
      </div>
    </div>

    <!-- äºŒç»´ç å¼¹çª— -->
    <div id="qrModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-xl p-8 max-w-sm mx-4 text-center">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">æ‰«ç å…³æ³¨éº¦æ€æ˜Ÿçƒ</h3>
        <div class="mb-4">
          <div class="w-48 h-48 mx-auto rounded-lg maixi-qrcode"></div>
        </div>
        <p class="text-gray-600 mb-2">ä½¿ç”¨å¾®ä¿¡æ‰«æäºŒç»´ç </p>
        <p class="text-blue-600 font-medium mb-4">å…³æ³¨éº¦æ€æ˜Ÿçƒå…¬ä¼—å·</p>
        <button onclick="hideQRCode()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition-colors">å…³é—­</button>
      </div>
    </div>

    <script>
      // è®¾å¤‡æ£€æµ‹å‡½æ•°
      function detectDevice() {
        const userAgent = navigator.userAgent.toLowerCase();
        const isWeChat = /micromessenger/i.test(userAgent);
        const isIOS = /iphone|ipad|ipod/.test(userAgent);
        const isAndroid = /android|harmonyos/.test(userAgent);
        const isMobile = /mobile|tablet|phone|pad/.test(userAgent) || isIOS || isAndroid;
        const isPC = !isMobile;

        return {
          isWeChat,
          isIOS,
          isAndroid,
          isMobile,
          isPC,
          userAgent,
        };
      }

      // é‡æ–°æ’åºä¸‹è½½é€‰é¡¹
      function reorderDownloadOptions() {
        const device = detectDevice();
        const container = document.getElementById("downloadContainer");
        const cards = Array.from(container.children);

        // æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯
        let deviceText = "";
        if (device.isWeChat) deviceText = "å¾®ä¿¡æµè§ˆå™¨";
        else if (device.isIOS) deviceText = "iOSè®¾å¤‡";
        else if (device.isAndroid) deviceText = "Androidè®¾å¤‡";
        else if (device.isPC) deviceText = "PCæµè§ˆå™¨";
        else deviceText = "æœªçŸ¥è®¾å¤‡";

        document.getElementById("deviceInfo").textContent = deviceText;

        // æ¸…é™¤ç°æœ‰çš„æ¨èæ ‡è®°
        cards.forEach((card) => {
          card.classList.remove("recommended", "secondary-recommended");
          const badges = card.querySelectorAll(".bg-blue-100, .bg-green-100");
          badges.forEach((badge) => {
            if (badge.textContent === "æ¨è" || badge.textContent === "æ¬¡æ¨è") {
              badge.remove();
            }
          });
        });

        // æ ¹æ®è®¾å¤‡ç±»å‹é‡æ–°æ’åº
        let sortedCards = [];

        if (device.isIOS) {
          // iOSè®¾å¤‡ï¼šiOS App Store > Webç‰ˆ > å…¶ä»–
          sortedCards = cards.sort((a, b) => {
            const aPlat = a.dataset.platform;
            const bPlat = b.dataset.platform;

            if (aPlat === "ios") return -1;
            if (bPlat === "ios") return 1;
            if (aPlat === "web") return -1;
            if (bPlat === "web") return 1;
            return 0;
          });
        } else if (device.isAndroid) {
          // Androidè®¾å¤‡ï¼šAndroid APK > Android Play Store > Webç‰ˆ > å…¶ä»–
          sortedCards = cards.sort((a, b) => {
            const aPlat = a.dataset.platform;
            const bPlat = b.dataset.platform;
            const aPrio = parseInt(a.dataset.priority);
            const bPrio = parseInt(b.dataset.priority);

            if (aPlat === "android" && bPlat === "android") {
              return aPrio - bPrio; // APK(0) ä¼˜å…ˆäº Play Store(1)
            }
            if (aPlat === "android") return -1;
            if (bPlat === "android") return 1;
            if (aPlat === "web") return -1;
            if (bPlat === "web") return 1;
            return 0;
          });
        } else if (device.isWeChat) {
          // å¾®ä¿¡æµè§ˆå™¨ï¼šå¾®ä¿¡æœåŠ¡å· > Webç‰ˆ > ç§»åŠ¨ç«¯åº”ç”¨
          sortedCards = cards.sort((a, b) => {
            const aPlat = a.dataset.platform;
            const bPlat = b.dataset.platform;

            if (aPlat === "wechat") return -1;
            if (bPlat === "wechat") return 1;
            if (aPlat === "web") return -1;
            if (bPlat === "web") return 1;
            return 0;
          });
        } else {
          // PCæµè§ˆå™¨ï¼šWebç‰ˆä¼˜å…ˆ
          sortedCards = cards.sort((a, b) => {
            const aPlat = a.dataset.platform;
            const bPlat = b.dataset.platform;

            if (aPlat === "web") return -1;
            if (bPlat === "web") return 1;
            return 0;
          });
        }

        // æ·»åŠ æ¨èæ ‡è®°
        if (sortedCards.length > 0) {
          // ç¬¬ä¸€ä¸ªé€‰é¡¹æ ‡è®°ä¸ºæ¨è
          sortedCards[0].classList.add("recommended");
          const firstBadgeContainer = sortedCards[0].querySelector(".flex.items-center.mt-1");
          if (firstBadgeContainer) {
            const recommendedBadge = document.createElement("span");
            recommendedBadge.className = "bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded";
            recommendedBadge.textContent = "æ¨è";
            firstBadgeContainer.insertBefore(recommendedBadge, firstBadgeContainer.firstChild);
          }

          // Webç‰ˆæ€»æ˜¯ä½œä¸ºæ¬¡æ¨èï¼ˆå¦‚æœä¸æ˜¯ç¬¬ä¸€æ¨èçš„è¯ï¼‰
          const webCard = sortedCards.find((card) => card.dataset.platform === "web");
          if (webCard && webCard !== sortedCards[0]) {
            webCard.classList.add("secondary-recommended");
            const webBadgeContainer = webCard.querySelector(".flex.items-center.mt-1");
            if (webBadgeContainer) {
              const secondaryBadge = document.createElement("span");
              secondaryBadge.className = "bg-green-100 text-green-800 text-xs px-2 py-1 rounded";
              secondaryBadge.textContent = "æ¬¡æ¨è";
              webBadgeContainer.insertBefore(secondaryBadge, webBadgeContainer.firstChild);
            }
          }
        }

        // é‡æ–°æ’åˆ—DOMå…ƒç´ 
        container.innerHTML = "";
        sortedCards.forEach((card) => container.appendChild(card));
      } // å¤åˆ¶ç½‘å€å‡½æ•°
      function copyWebUrl() {
        const webUrl = GLOBAL_CONFIG.webUrl;

        // å°è¯•ä½¿ç”¨ç°ä»£çš„Clipboard API
        if (navigator.clipboard && window.isSecureContext) {
          navigator.clipboard
            .writeText(webUrl)
            .then(() => {
              showCopySuccess();
            })
            .catch((err) => {
              // å¦‚æœå¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ³•
              fallbackCopyTextToClipboard(webUrl);
            });
        } else {
          // ä½¿ç”¨å¤‡ç”¨æ–¹æ³•
          fallbackCopyTextToClipboard(webUrl);
        }
      }

      // å¤‡ç”¨å¤åˆ¶æ–¹æ³•
      function fallbackCopyTextToClipboard(text) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.top = "0";
        textArea.style.left = "0";
        textArea.style.position = "fixed";
        textArea.style.opacity = "0";

        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();

        try {
          document.execCommand("copy");
          showCopySuccess();
        } catch (err) {
          showNotification('å¤åˆ¶å¤±è´¥', `è¯·æ‰‹åŠ¨å¤åˆ¶ç½‘å€ï¼š\n\n${text}`, 'error');
        }

        document.body.removeChild(textArea);
      } // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
      function showCopySuccess() {
        // åˆ›å»ºä¸´æ—¶æç¤ºå…ƒç´ 
        const toast = document.createElement("div");
        toast.className = "fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300";
        toast.textContent = "ç½‘å€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿";

        document.body.appendChild(toast);

        // 3ç§’åç§»é™¤æç¤º
        setTimeout(() => {
          toast.style.opacity = "0";
          setTimeout(() => {
            document.body.removeChild(toast);
          }, 300);
        }, 3000);
      }

      // æ˜¾ç¤ºäºŒç»´ç å¼¹çª—
      function showQRCode() {
        document.getElementById("qrModal").classList.remove("hidden");
      }

      // éšè—äºŒç»´ç å¼¹çª—
      function hideQRCode() {
        document.getElementById("qrModal").classList.add("hidden");
      }

      // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
      document.getElementById("qrModal").addEventListener("click", function (e) {
        if (e.target === this) {
          hideQRCode();
        }
      }); 
      // APKä¸‹è½½å‡½æ•° - ä¸“é—¨å¤„ç†ç§»åŠ¨ç«¯ä¸‹è½½
      function onClickDownloadAPK() {
        const device = detectDevice();
        const apkUrl = GLOBAL_CONFIG.apkDownloadUrl;

        // æ£€æµ‹å¾®ä¿¡æµè§ˆå™¨
        if (device.isWeChat) {
          showNotification(
            'æ£€æµ‹åˆ°å¾®ä¿¡æµè§ˆå™¨', 
            `ä¸ºäº†æ­£å¸¸ä¸‹è½½APKå®‰è£…åŒ…ï¼Œè¯·ï¼š\n\n1. ç‚¹å‡»å³ä¸Šè§’"..."èœå•\n2. é€‰æ‹©"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€"\n3. ç„¶åé‡æ–°ç‚¹å‡»ä¸‹è½½æŒ‰é’®\n\næˆ–è€…å¤åˆ¶é“¾æ¥åˆ°ç³»ç»Ÿæµè§ˆå™¨ä¸­æ‰“å¼€ï¼š\n${apkUrl}`, 
            'warning'
          );
          return;
        }

        // æ˜¾ç¤ºä¸‹è½½å¼€å§‹æç¤º
        showDownloadTip();
      }

      // æ˜¾ç¤ºä¸‹è½½æç¤º
      function showDownloadTip() {
        const device = detectDevice();
        const toast = document.createElement("div");
        toast.id = "downloadToast";
        toast.className = "fixed top-4 left-4 right-4 bg-blue-500 text-white p-4 rounded-lg shadow-lg z-50 transition-all duration-300";

        let tipContent = "";
        if (device.isMobile) {
          tipContent = `
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl">ğŸ“±</div>
                        <div class="flex-1">
                            <div class="font-semibold">æ­£åœ¨å°è¯•ä¸‹è½½APKå®‰è£…åŒ…...</div>
                            <div class="text-sm mt-1">å¦‚æœä¸‹è½½æœªè‡ªåŠ¨å¼€å§‹ï¼š</div>
                            <div class="text-xs mt-1 space-y-1">
                                <div>â€¢ æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å…è®¸ä¸‹è½½æ–‡ä»¶</div>
                                <div>â€¢ æŸ¥çœ‹é€šçŸ¥æ æˆ–ä¸‹è½½ç®¡ç†å™¨</div>
                                <div>â€¢ å°è¯•é•¿æŒ‰ä¸‹è½½æŒ‰é’®é€‰æ‹©"ä¸‹è½½é“¾æ¥"</div>
                            </div>
                            <div class="text-xs mt-2 opacity-90">ä¸‹è½½å®Œæˆååœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰¾åˆ°APKæ–‡ä»¶å¹¶å®‰è£…</div>
                            <button onclick="manualDownload()" class="mt-2 bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100">
                                æ‰‹åŠ¨ä¸‹è½½
                            </button>
                        </div>
                        <button onclick="closeDownloadTip()" class="text-white hover:text-gray-200 text-xl leading-none">&times;</button>
                    </div>
                `;
        } else {
          tipContent = `
                    <div class="flex items-start space-x-3">
                        <div class="text-2xl">ğŸ’»</div>
                        <div class="flex-1">
                            <div class="font-semibold">æ­£åœ¨ä¸‹è½½APKå®‰è£…åŒ…...</div>
                            <div class="text-sm mt-1">è¯·ä¼ è¾“åˆ°Androidè®¾å¤‡è¿›è¡Œå®‰è£…</div>
                            <button onclick="manualDownload()" class="mt-2 bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100">
                                é‡æ–°ä¸‹è½½
                            </button>
                        </div>
                        <button onclick="closeDownloadTip()" class="text-white hover:text-gray-200 text-xl leading-none">&times;</button>
                    </div>
                `;
        }

        toast.innerHTML = tipContent;
        document.body.appendChild(toast);

        // 10ç§’åè‡ªåŠ¨ç§»é™¤æç¤º
        setTimeout(() => {
          closeDownloadTip();
        }, 10000);
      }

      // æ‰‹åŠ¨ä¸‹è½½å‡½æ•°
      function manualDownload() {
        window.open(GLOBAL_CONFIG.apkDownloadUrl, "_blank");
      }

      // å…³é—­ä¸‹è½½æç¤º
      function closeDownloadTip() {
        const toast = document.getElementById("downloadToast");
        if (toast) {
          toast.style.opacity = "0";
          setTimeout(() => {
            if (document.body.contains(toast)) {
              document.body.removeChild(toast);
            }
          }, 300);
        }
      }

      // æ˜¾ç¤ºè‡ªå®šä¹‰é€šçŸ¥æ›¿ä»£alert
      function showNotification(title, message, type = 'info') {
        const notificationId = 'notification_' + Date.now();
        const notification = document.createElement('div');
        notification.id = notificationId;
        notification.className = `fixed top-4 left-4 right-4 md:left-1/2 md:right-auto md:transform md:-translate-x-1/2 md:max-w-md bg-white border-l-4 rounded-lg shadow-xl z-50 transition-all duration-300 ${
          type === 'error' ? 'border-red-500' : 
          type === 'warning' ? 'border-yellow-500' : 
          'border-blue-500'
        }`;
        
        notification.innerHTML = `
            <div class="p-4 cursor-pointer" onclick="closeNotification('${notificationId}')">
            <div class="flex items-start justify-between">
              <div class="flex items-start space-x-3 flex-1">
              <div class="text-2xl">
                ${type === 'error' ? 'âŒ' : type === 'warning' ? 'âš ï¸' : 'â„¹ï¸'}
              </div>
              <div class="flex-1">
                <div class="font-semibold text-gray-800 mb-2">${title}</div>
                <div class="text-sm text-gray-600 whitespace-pre-line">${message}</div>
              </div>
              </div>
              <button onclick="event.stopPropagation(); closeNotification('${notificationId}')" 
              class="text-gray-400 hover:text-gray-600 text-xl leading-none flex-shrink-0 ml-2">
              Ã—
              </button>
            </div>
            </div>
        `;
        
        document.body.appendChild(notification);
      }

      // å…³é—­é€šçŸ¥
      function closeNotification(notificationId) {
        const notification = document.getElementById(notificationId);
        if (notification) {
          notification.style.opacity = '0';
          notification.style.transform = 'translateY(-20px)';
          setTimeout(() => {
            if (document.body.contains(notification)) {
              document.body.removeChild(notification);
            }
          }, 300);
        }
      }

      // ä¸‹è½½å¤„ç†å‡½æ•°
      function downloadApp(type) {
        const device = detectDevice();
        // ä¸‹è½½é“¾æ¥
        const downloadLinks = {
          "ios-appstore": GLOBAL_CONFIG.iosAppStoreUrl,
          "android-playstore": GLOBAL_CONFIG.androidPlayStoreUrl,
          web: GLOBAL_CONFIG.webUrl,
        };

        if (type === "wechat") {
          // æ˜¾ç¤ºäºŒç»´ç å¼¹çª—
          showQRCode();
          return;
        }

        // ç›´æ¥ä¸‹è½½
        if (downloadLinks[type]) {
          window.open(downloadLinks[type], "_blank");
        }
      }

      // å¯åŠ¨ç½‘é¡µç‰ˆå‡½æ•°
      function launchWebVersion() {
        window.open(GLOBAL_CONFIG.webGameUrl, "_blank");
      }

      // åˆå§‹åŒ–é…ç½®
      function initializeConfig() {
        // è®¾ç½®ç½‘é¡µç‰ˆURLæ˜¾ç¤º
        const webUrlDisplay = document.getElementById("webUrlDisplay");
        if (webUrlDisplay) {
          webUrlDisplay.textContent = GLOBAL_CONFIG.webUrl;
        }

        // è®¾ç½®APKä¸‹è½½é“¾æ¥
        const apkDownloadButton = document.getElementById("apkDownloadButton");
        if (apkDownloadButton) {
          const device = detectDevice();
          if (!device.isWeChat) {
            apkDownloadButton.href = GLOBAL_CONFIG.apkDownloadUrl;
          } else {
            apkDownloadButton.onclick = onClickDownloadAPK;
            apkDownloadButton.removeAttribute('href');
          }
        }

        // ä¸ºPCå¹³å°æ·»åŠ "å¯åŠ¨ç½‘é¡µç‰ˆ"æŒ‰é’®
        const device = detectDevice();
        if (device.isPC) {
          const webButtonContainer = document.getElementById("webButtonContainer");
          if (webButtonContainer) {
            const launchButton = document.createElement("button");
            launchButton.className = "bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors";
            launchButton.textContent = "å¯åŠ¨ç½‘é¡µç‰ˆ";
            launchButton.onclick = launchWebVersion;
            webButtonContainer.appendChild(launchButton);
          }
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œåˆå§‹åŒ–å’Œæ’åº
      initializeConfig();
      reorderDownloadOptions();

      // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼ˆå¤„ç†æ¨ªç«–å±åˆ‡æ¢ç­‰æƒ…å†µï¼‰
      window.addEventListener("resize", function () {
        setTimeout(reorderDownloadOptions, 100);
      });
    </script>
  </body>
</html>
