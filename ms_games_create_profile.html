<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>éº¦æ€æ˜Ÿçƒ - å¹´çº§æ€§åˆ«ç»Ÿè®¡</title>
    <script src="https://cdn.keepwork.com/keepwork/cdn/tailwindcss@3.4.16.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Microsoft YaHei", sans-serif;
        width: 100vw;
        height: 100vh;
        overflow: auto;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 75%, #c850c0 100%);
        position: relative;
      }
      .planet-name {
        color: #40ce74;
        /* ç»¿è‰² */
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      /* æµ®åŠ¨çš„å¡é€šäº‘æœµèƒŒæ™¯ */
      .cloud {
        position: absolute;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50px;
        opacity: 0.6;
        animation: float 6s ease-in-out infinite;
      }

      .cloud:before {
        content: "";
        position: absolute;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50px;
      }

      .cloud:after {
        content: "";
        position: absolute;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 50px;
      }

      .cloud1 {
        width: 80px;
        height: 30px;
        top: 10%;
        left: 10%;
        animation-delay: 0s;
      }

      .cloud1:before {
        width: 30px;
        height: 30px;
        top: -15px;
        left: 10px;
      }

      .cloud1:after {
        width: 40px;
        height: 40px;
        top: -20px;
        right: 10px;
      }

      .cloud2 {
        width: 100px;
        height: 40px;
        top: 20%;
        right: 15%;
        animation-delay: 2s;
      }

      .cloud2:before {
        width: 40px;
        height: 40px;
        top: -20px;
        left: 15px;
      }

      .cloud2:after {
        width: 50px;
        height: 50px;
        top: -25px;
        right: 15px;
      }

      .cloud3 {
        width: 60px;
        height: 25px;
        bottom: 20%;
        left: 20%;
        animation-delay: 4s;
      }

      .cloud3:before {
        width: 25px;
        height: 25px;
        top: -12px;
        left: 8px;
      }

      .cloud3:after {
        width: 30px;
        height: 30px;
        top: -15px;
        right: 8px;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px) translateX(0px);
        }
        25% {
          transform: translateY(-10px) translateX(5px);
        }
        50% {
          transform: translateY(-5px) translateX(-5px);
        }
        75% {
          transform: translateY(-15px) translateX(3px);
        }
      }

      /* é—ªçƒæ˜Ÿæ˜Ÿ */
      .star {
        position: absolute;
        background: #ffd700;
        -webkit-clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        animation: twinkle 2s ease-in-out infinite alternate;
      }

      /* Fallback for browsers without clip-path support */
      @supports not (clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)) {
        .star {
          border-radius: 50%;
          transform: rotate(45deg);
        }
      }

      .star1 {
        width: 15px;
        height: 15px;
        top: 15%;
        left: 80%;
        animation-delay: 0s;
      }

      .star2 {
        width: 12px;
        height: 12px;
        top: 30%;
        left: 5%;
        animation-delay: 0.5s;
      }

      .star3 {
        width: 18px;
        height: 18px;
        bottom: 25%;
        right: 10%;
        animation-delay: 1s;
      }

      @keyframes twinkle {
        0% {
          opacity: 0.4;
          transform: scale(0.8);
        }
        100% {
          opacity: 1;
          transform: scale(1.2);
        }
      }

      /* é€‰é¡¹æŒ‰é’®æ ·å¼ */
      .option-btn {
        transition: all 0.3s ease;
        border: 2px solid transparent;
      }

      .option-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .option-btn.selected {
        border-color: #fbbf24;
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
      }

      /* ç¡®å®šæŒ‰é’®åŠ¨ç”» */
      .confirm-btn {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .confirm-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s;
      }

      .confirm-btn:hover::before {
        left: 100%;
      }

      .confirm-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(245, 158, 11, 0.4);
      } /* æ ‡é¢˜æ ·å¼ */
      .title-animate {
        color: #fff;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      /* æ¶ˆæ¯æç¤ºæ ·å¼ */
      .toast {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(239, 68, 68, 0.95);
        color: white;
        padding: 12px 24px;
        border-radius: 8px;
        z-index: 1000;
        font-size: 16px;
        font-weight: 500;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center p-4">
    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="cloud cloud1"></div>
    <div class="cloud cloud2"></div>
    <div class="cloud cloud3"></div>
    <div class="star star1"></div>
    <div class="star star2"></div>
    <div class="star star3"></div>
    <div class="w-full max-w-4xl mx-auto relative z-10 min-h-screen py-4">
      <!-- ä¸»æ ‡é¢˜ -->
      <div class="text-center mb-6 title-animate">
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">ğŸª æ¬¢è¿æ¥åˆ°<span class="planet-name">éº¦æ€æ˜Ÿçƒ</span> ğŸŒŸ</h1>
        <p class="text-lg text-blue-200">è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹ä½ çš„ä¿¡æ¯å§ï¼</p>
      </div>

      <!-- è¡¨å•å®¹å™¨ -->
      <div class="bg-white/95 backdrop-blur-sm rounded-3xl p-6 md:p-8 shadow-2xl">
        <!-- å¹´çº§é€‰æ‹© -->
        <div class="mb-8">
          <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4 text-center">ä½ çš„å¹´çº§æ˜¯ï¼Ÿ</h2>
          <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3" id="gradeOptions">
            <button
              class="option-btn bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 text-blue-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="5-7å²"
            >
              5-7å²
            </button>
            <button
              class="option-btn bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 text-green-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="1å¹´çº§"
            >
              1å¹´çº§
            </button>
            <button
              class="option-btn bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 text-green-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="2å¹´çº§"
            >
              2å¹´çº§
            </button>
            <button
              class="option-btn bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 text-green-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="3å¹´çº§"
            >
              3å¹´çº§
            </button>
            <button
              class="option-btn bg-gradient-to-br from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 text-green-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="4å¹´çº§"
            >
              4å¹´çº§
            </button>
            <button
              class="option-btn bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 text-purple-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="5å¹´çº§"
            >
              5å¹´çº§
            </button>
            <button
              class="option-btn bg-gradient-to-br from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 text-purple-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="6å¹´çº§"
            >
              6å¹´çº§
            </button>
            <button
              class="option-btn bg-gradient-to-br from-red-50 to-red-100 hover:from-red-100 hover:to-red-200 text-red-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="åˆä¸­"
            >
              åˆä¸­
            </button>
            <button
              class="option-btn bg-gradient-to-br from-orange-50 to-orange-100 hover:from-orange-100 hover:to-orange-200 text-orange-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="é«˜ä¸­"
            >
              é«˜ä¸­
            </button>
            <button
              class="option-btn bg-gradient-to-br from-gray-50 to-gray-100 hover:from-gray-100 hover:to-gray-200 text-gray-800 font-semibold py-4 px-3 rounded-xl text-sm md:text-base"
              data-grade="æˆäºº"
            >
              æˆäºº
            </button>
          </div>
        </div>
        <!-- æ€§åˆ«é€‰æ‹© -->
        <div class="mb-8">
          <h2 class="text-xl md:text-2xl font-bold text-gray-800 mb-4 text-center">ä½ çš„æ€§åˆ«æ˜¯ï¼Ÿ</h2>
          <div class="flex justify-center gap-6" id="genderOptions">
            <button
              class="option-btn bg-gradient-to-br from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 text-blue-800 font-semibold py-4 px-8 rounded-xl text-lg min-w-28"
              data-gender="ç”·ç”Ÿ"
            >
              ğŸ‘¦ ç”·ç”Ÿ
            </button>
            <button
              class="option-btn bg-gradient-to-br from-pink-50 to-pink-100 hover:from-pink-100 hover:to-pink-200 text-pink-800 font-semibold py-4 px-8 rounded-xl text-lg min-w-28"
              data-gender="å¥³ç”Ÿ"
            >
              ğŸ‘§ å¥³ç”Ÿ
            </button>
          </div>
        </div>        <!-- ç¡®å®šæŒ‰é’® -->
        <div class="text-center">
          <button id="confirmBtn" class="confirm-btn text-white font-bold py-4 px-16 rounded-2xl text-xl md:text-2xl opacity-50">âœ¨ ç¡®å®š âœ¨</button>
        </div>
      </div>
    </div>

    <script>
      let selectedGrade = "";
      let selectedGender = "";

      // å¹´çº§é€‰æ‹©å¤„ç†
      document.getElementById("gradeOptions").addEventListener("click", function (e) {
        if (e.target.classList.contains("option-btn")) {
          // ç§»é™¤å…¶ä»–æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
          document.querySelectorAll("#gradeOptions .option-btn").forEach((btn) => {
            btn.classList.remove("selected");
          });

          // æ·»åŠ å½“å‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
          e.target.classList.add("selected");
          selectedGrade = e.target.getAttribute("data-grade");

          checkFormCompletion();
        }
      });

      // æ€§åˆ«é€‰æ‹©å¤„ç†
      document.getElementById("genderOptions").addEventListener("click", function (e) {
        if (e.target.classList.contains("option-btn")) {
          // ç§»é™¤å…¶ä»–æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
          document.querySelectorAll("#genderOptions .option-btn").forEach((btn) => {
            btn.classList.remove("selected");
          });

          // æ·»åŠ å½“å‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
          e.target.classList.add("selected");
          selectedGender = e.target.getAttribute("data-gender");

          checkFormCompletion();
        }
      });      // æ£€æŸ¥è¡¨å•å®ŒæˆçŠ¶æ€
      function checkFormCompletion() {
        const confirmBtn = document.getElementById("confirmBtn");
        if (selectedGrade && selectedGender) {
          confirmBtn.classList.remove("opacity-50");
          confirmBtn.classList.add("opacity-100");
        } else {
          confirmBtn.classList.remove("opacity-100");
          confirmBtn.classList.add("opacity-50");
        }
      }
      // æ ¹æ®å¹´çº§è®¡ç®—å¹´é¾„
      function calculateAge(grade) {
        const ageMap = {
          "5-7å²": 6,
          "1å¹´çº§": 7,
          "2å¹´çº§": 8,
          "3å¹´çº§": 9,
          "4å¹´çº§": 10,
          "5å¹´çº§": 11,
          "6å¹´çº§": 12,
          åˆä¸­: 14,
          é«˜ä¸­: 17,
          æˆäºº: 25,
        };
        return ageMap[grade] || 7; // é»˜è®¤è¿”å›7å²
      }

      // è½¬æ¢æ€§åˆ«æ ¼å¼
      function convertGender(gender) {
        return gender === "ç”·ç”Ÿ" ? "male" : "female";
      }
      // ç¡®å®šæŒ‰é’®ç‚¹å‡»å¤„ç†
      document.getElementById("confirmBtn").addEventListener("click", function () {
        if (selectedGrade && selectedGender) {
          // è®¡ç®—å¹´é¾„å’Œè½¬æ¢æ€§åˆ«æ ¼å¼
          const age = calculateAge(selectedGrade);
          const gender = convertGender(selectedGender);
          // å‘çˆ¶çª—å£å‘é€æ¶ˆæ¯
          if (window.parent && window.parent.postMessage) {
            window.parent.postMessage(
              {
                type: "userProfileCreated",
                age: age,
                gender: gender,
                grade: selectedGrade,
              },
              "*"
            );
          }

          // æ˜¾ç¤ºæˆåŠŸæç¤º
          showToast("ğŸ‰ ä¿¡æ¯æäº¤æˆåŠŸï¼æ¬¢è¿åŠ å…¥éº¦æ€æ˜Ÿçƒï¼");
        } else {
          // æ˜¾ç¤ºæç¤ºä¿¡æ¯
          let message = "";
          if (!selectedGrade && !selectedGender) {
            message = "è¯·å…ˆé€‰æ‹©å¹´çº§å’Œæ€§åˆ«";
          } else if (!selectedGrade) {
            message = "è¯·å…ˆé€‰æ‹©å¹´çº§";
          } else if (!selectedGender) {
            message = "è¯·å…ˆé€‰æ‹©æ€§åˆ«";
          }
          showToast(message);
        }
      });

      // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
      function showToast(message) {
        const toast = document.createElement("div");
        toast.className = "toast";
        toast.textContent = message;
        document.body.appendChild(toast);

        // 2ç§’åè‡ªåŠ¨æ¶ˆå¤±
        setTimeout(() => {
          document.body.removeChild(toast);
        }, 2000);
      }

      document.body.style.overflow = 'hidden';
      document.documentElement.style.overflow = 'hidden';
        
    </script>
  </body>
</html>
