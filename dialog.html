<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¥æ®¿å®ˆæŠ¤è€… - RPGå¯¹è¯ç•Œé¢</title>
    <script src="https://cdn.keepwork.com/sdk/keepworkSDK.iife.js"></script>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 0;
             background: linear-gradient(135deg, #87ceeb 0%, #6bb6ff 50%, #4a90e2 100%);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
        }
        
        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #87ceeb 0%, #6bb6ff 50%, #4a90e2 100%);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .story-image-container {
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            margin: 20px auto;
            margin-bottom: 30px;
            max-height: 60vh;
            max-width: 90%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .story-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 20px;
            transition: all 0.5s ease;
        }
        
        /* è£…é¥°æ€§æ˜Ÿæ˜ŸåŠ¨ç”» */
        .star {
            position: absolute;
            color: rgba(255, 255, 255, 0.8);
            font-size: 20px;
            animation: twinkle 3s ease-in-out infinite;
            z-index: 1;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        
        .star:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .star:nth-child(2) { top: 20%; right: 15%; animation-delay: 1s; }
        .star:nth-child(3) { top: 60%; left: 5%; animation-delay: 2s; }
        .star:nth-child(4) { bottom: 30%; right: 10%; animation-delay: 0.5s; }
        .star:nth-child(5) { top: 40%; left: 20%; animation-delay: 1.5s; }
        .star:nth-child(6) { bottom: 20%; left: 30%; animation-delay: 2.5s; }
        
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 20;
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        
        
        .content {
            flex: 0.5;
            padding: 1.5vw;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 0;
            max-height: 65vh;
            overflow: visible;
            padding-bottom: 0px;
            z-index: 50;
            position: relative;
        }
        
        .hidden {
            display: none !important;
        }

        .dialog-container {
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 50%, #2c5aa0 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(15px);
            width: 90%;
            max-width: 1100px;
            margin: 0 auto;
            min-height: 120px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            display: none;
            flex-direction: column;
            z-index: 100;
            position: relative;
        }

        .dialog-text {
            color: rgba(255, 255, 255, 0.95);
            font-size: clamp(16px, 2.5vw, 24px);
            line-height: 1.6;
            margin-left: 40px;
            margin-bottom: 25px;
            margin-right: 200px;
            text-align: left;
            min-height: 60px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .dialog-container {
            position: relative;
            /* å…¶ä»–æ ·å¼ä¿æŒä¸å˜ */
        }

        .dialog-controls {
            position: absolute;
            right: 20px;
            bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .audio-btn {
            position: absolute;
            top: 30px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg,rgb(250, 250, 250),rgb(255, 255, 255));
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            z-index: 1;
        }

        .audio-btn:hover {
            background: linear-gradient(45deg,rgb(255, 255, 255),rgb(255, 255, 255));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgb(255, 255, 255);
        }

        .audio-btn:active {
            transform: translateY(-1px) scale(0.95);
        }

        .audio-btn.playing {
            background: linear-gradient(45deg,rgb(255, 255, 255),rgb(255, 255, 255));
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .dialog-button {
            background: linear-gradient(45deg, #2196f3, #42a5f5);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: clamp(18px, 2.2vw, 26px);
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            min-height: 50px;
            min-width: 120px;
        }

        .dialog-button:hover {
            background: linear-gradient(45deg, #1976d2, #2196f3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.4);
        }

        .dialog-button:active {
            transform: translateY(-1px) scale(0.98);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }

        /* è™šæ‹ŸæŒ‰é”®æ ·å¼ */
        .virtual-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: none;
            flex-direction: column;
            gap: 15px;
            z-index: 1001;
        }

        .virtual-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, rgba(33, 150, 243, 0.9), rgba(66, 165, 245, 0.9));
            border: 2px solid rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            touch-action: manipulation;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .virtual-btn:active {
            background: linear-gradient(45deg, rgba(25, 118, 210, 0.9), rgba(33, 150, 243, 0.9));
            transform: scale(0.95);
        }

        .virtual-btn.disabled {
            background: rgba(128, 128, 128, 0.6);
            cursor: not-allowed;
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
         @media (max-width: 768px) {
             .story-image-container {
                 max-height: 40vh;
                 padding: 15px;
             }

             .virtual-controls {
                 display: flex;
             }

             .dialog-container {
                 width: 95%;
                 padding: 20px;
             }


             .content {
                 justify-content: center;
                 align-items: center;
             }
         }



        /* è§¦æ§ä¼˜åŒ– */
        @media (hover: none) and (pointer: coarse) {
            .dialog-button:hover {
                background: linear-gradient(45deg, #2196f3, #42a5f5);
                transform: none;
            }

            .virtual-controls {
                display: flex;
            }
        }

        /* è§†é¢‘æ’­æ”¾å™¨æ§ä»¶éšè—æ ·å¼ */
        #videoPlayer::-webkit-media-controls,
        #dialogVideoPlayer::-webkit-media-controls {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-panel,
        #dialogVideoPlayer::-webkit-media-controls-panel {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-play-button,
        #dialogVideoPlayer::-webkit-media-controls-play-button {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-timeline,
        #dialogVideoPlayer::-webkit-media-controls-timeline {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-current-time-display,
        #dialogVideoPlayer::-webkit-media-controls-current-time-display {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-time-remaining-display,
        #dialogVideoPlayer::-webkit-media-controls-time-remaining-display {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-mute-button,
        #dialogVideoPlayer::-webkit-media-controls-mute-button {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-volume-slider,
        #dialogVideoPlayer::-webkit-media-controls-volume-slider {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-fullscreen-button,
        #dialogVideoPlayer::-webkit-media-controls-fullscreen-button {
            display: none !important;
        }

        #videoPlayer::-webkit-media-controls-overlay-play-button,
        #dialogVideoPlayer::-webkit-media-controls-overlay-play-button {
            display: none !important;
        }

        /* Firefox æ§ä»¶éšè— */
        #videoPlayer::-moz-media-controls,
        #dialogVideoPlayer::-moz-media-controls {
            display: none !important;
        }

        /* é€šç”¨æ§ä»¶éšè— */
        #videoPlayer::media-controls,
        #dialogVideoPlayer::media-controls {
            display: none !important;
        }

        /* å¼ºåˆ¶éšè—æ‰€æœ‰è§†é¢‘æ§ä»¶ */
        #videoPlayer[controls],
        #dialogVideoPlayer[controls] {
            -webkit-appearance: none;
            appearance: none;
        }

        #videoPlayer::-webkit-media-controls-enclosure,
        #dialogVideoPlayer::-webkit-media-controls-enclosure {
            display: none !important;
        }
    </style>

</head>
<body>
    <div class="container">
        <!-- è£…é¥°æ€§æ˜Ÿæ˜Ÿ -->
        <div class="star">âœ¨</div>
        <div class="star">â­</div>
        <div class="star">ğŸŒŸ</div>
        <div class="star">âœ¨</div>
        <div class="star">â­</div>
        <div class="star">ğŸŒŸ</div>
        
        <!-- è¿”å›æŒ‰é’® -->
        <div class="back-button" onclick="previousDialog()" title="è¿”å›ä¸Šä¸€ä¸ªå¯¹è¯">
            â†
        </div>
        
        <!-- æ•…äº‹å›¾ç‰‡åŒºåŸŸ -->
        <div class="story-image-container">
            <img id="storyImage" class="story-image" src="" alt="æ•…äº‹æ’å›¾">
        </div>
        
        <div class="dialog-container" id="dialogBox">
            <button class="audio-btn" id="audioButton" onclick="toggleAudio()" title="æ’­æ”¾è¯­éŸ³">
                ğŸ”Š
            </button>
            <div class="game-title" id="gameTitle" style="display: none; color: rgba(255, 255, 255, 0.95); font-size: clamp(16px, 2.5vw, 24px); line-height: 1.6; margin-top: -15px; margin-bottom: 10px; margin-right: 60px; text-align: left; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);">
                å®ˆæŠ¤è€…
            </div>
            <div class="dialog-text" id="dialogText">
            </div>
            <div class="dialog-controls">
                <button class="dialog-button" id="dialogButton" onclick="nextDialog()">ç»§ç»­ ğŸ‘Œ</button>
            </div>
        </div>
        
        <video id="videoPlayer" class="video-player" style="display: none;" 
               preload="metadata" 
               playsinline 
               webkit-playsinline 
               controls="false" 
               controlslist="nodownload nofullscreen noremoteplayback"
               disablePictureInPicture>
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
        </video>
        
        <!-- è™šæ‹ŸæŒ‰é”®æ§ä»¶ -->
        <div class="virtual-controls" id="virtualControls">
            <button class="virtual-btn" id="virtualNext" onclick="nextDialog()" title="ä¸‹ä¸€æ­¥">
                â–¶ï¸
            </button>
            <button class="virtual-btn" id="virtualSkip" onclick="skipDialog()" title="è·³è¿‡">
                â­ï¸
            </button>
        </div>

        <!-- iframeå†…å®¹åŒºåŸŸ -->
        <div id="iframeContent" class="hidden" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; pointer-events: auto; background: rgba(0,0,0,0.1);">
            <iframe id="contentFrame" style="width: 100%; height: 100%; border: none; pointer-events: auto;"></iframe>
        </div>
    </div>

    <script>
        let dialogData = [];
        let gameTitle = "";
        let game_config = null;
        let gameLoaded = false;
        let videoUrl = null; // è§†é¢‘URL

        let currentDialogIndex = 0;
        let isDialogEnded = false;
        let currentSpeech = null;
        let isPlaying = false;
        let currentAudio = null; // å½“å‰æ’­æ”¾çš„éŸ³é¢‘å¯¹è±¡
        let currentIframeUrl = null;
        let configUrl = null;
        let isIframePreloaded = false;
        let voicesLoaded = false;
        let handleKeyPress = null; // é”®ç›˜äº‹ä»¶å¤„ç†å‡½æ•°
        let currentSteps = null; // å½“å‰æ‰§è¡Œçš„stepsæ•°ç»„
        let currentStepIndex = -1; // å½“å‰æ­¥éª¤ç´¢å¼•
        
        // KeepworkSDK ç›¸å…³å˜é‡
        let sdk = null;
        let sdkInitialized = false;
        let audioCache = new Map(); // éŸ³é¢‘ç¼“å­˜
        
        // åˆå§‹åŒ–KeepworkSDK
        function initKeepworkSDK() {
            try {
                sdk = new KeepworkSDK({timeout: 30000});
                sdkInitialized = true;
                console.log('KeepworkSDK åˆå§‹åŒ–æˆåŠŸ');
            } catch (error) {
                console.error('KeepworkSDK åˆå§‹åŒ–å¤±è´¥:', error);
                sdkInitialized = false;
                console.warn('å°†ä½¿ç”¨å¤‡ç”¨è¯­éŸ³æ–¹æ¡ˆ');
            }
        }
        
        // è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®skiné€‰æ‹©å¯¹åº”çš„èµ„æº
        function getResourceBySkin(resource, skin) {
            if (typeof resource === 'object' && resource !== null) {
                // å¦‚æœresourceæ˜¯å¯¹è±¡ï¼Œæ ¹æ®skiné€‰æ‹©å¯¹åº”çš„å€¼
                return resource[skin] || resource['orange'] || Object.values(resource)[0] || '';
            } else if (typeof resource === 'string') {
                // å¦‚æœresourceæ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥è¿”å›
                return resource;
            }
            return '';
        }
        let dialogTypes = {
            'SYESTEM_DIALOG_1': {
                dialogData: [
                    {
                        text: "é†’é†’ï¼ä½ å¿«é†’é†’ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46498/raw#ç¬¬ä¸€å¹•.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46539/raw#1.MP3",
                        title: "æŠ±æŠ±é¾™"
                    },
                    {
                        text: "å¤´å¥½ç–¼......æˆ‘è¿™æ˜¯åœ¨å“ª......",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46413/raw#é†’ä¹‹å‰.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46557/raw#my_headache.MP3",
                        title: "ï¼ˆæˆ‘ï¼‰"
                    },
                    {
                        text: "ä½ ç»ˆäºé†’äº†ï¼è¿™é‡Œæ˜¯éº¦æ€æ˜Ÿçƒã€‚æˆ‘æ˜¯æŠ±æŠ±é¾™ï¼Œæˆ‘ä»¬æ­£åœ¨ç²¾ç¥ä¸–ç•Œä¸­å¯¹è¯ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46499/raw#ç¬¬äºŒå¹•.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46618/raw#awake.MP3"
                    },
                    {
                        text: "å¾ˆä¹…ä»¥å‰ï¼Œéº¦æ€æ˜Ÿçƒé¢ä¸´ç€ä¸€åœºå·¨å¤§çš„å±æœºã€‚å½“æ—¶çš„æ˜Ÿçƒå±…æ°‘å› ä¸ºç¼ºä¹æƒ…æ„Ÿè¿æ¥è€Œå˜å¾—å­¤ç‹¬å†·æ¼ ï¼Œæ•´ä¸ªæ˜Ÿçƒé™·å…¥äº†ç°è‰²çš„æ²‰å¯‚ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46392/raw#1.jpeg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46541/raw#3.MP3"
                    },
                    {
                        text: "å°±åœ¨è¿™æ—¶ï¼Œå¤©ç©ºä¸­é™ä¸‹äº†æ— æ•°é—ªé—ªå‘å…‰çš„é¾™è›‹ï¼Œæ¯ä¸ªè›‹éƒ½æ‰¿è½½ç€é‡æ–°ç‚¹ç‡ƒæ˜Ÿçƒæ´»åŠ›çš„ä½¿å‘½ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46393/raw#2.jpeg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46542/raw#4.MP3"
                    },
                    {
                        text: "å¦‚ä»Šï¼Œæ¯ä¸ªéº¦æ€æ˜Ÿçƒçš„æ–°ç”Ÿå±…æ°‘éƒ½ä¼šè·å¾—ä¸€æšç‹¬ç‰¹çš„é¾™è›‹ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46391/raw#3.jpeg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46543/raw#5.MP3"
                    },
                    {
                        text: "è¿™äº›é¾™è›‹ä¼šæ ¹æ®ä¸»äººçš„ä¸ªæ€§ã€èƒ½åŠ›å’Œæƒ…æ„Ÿç‰¹å¾ï¼Œå­µåŒ–å‡ºå®Œå…¨ä¸åŒçš„æŠ±æŠ±é¾™ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46394/raw#04.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46544/raw#6.MP3"
                    },
                    {
                        text: "æˆ‘ä¼šé™ªç€ä½ ä¸€èµ·æˆé•¿å“¦~",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46395/raw#5.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46558/raw#yi_qi_cheng_zhang.MP3"
                    },
                    {
                        text: "â€¦â€¦é‚£æˆ‘ç°åœ¨æ˜¯éº¦æ€æ˜Ÿçƒçš„æ–°å±…æ°‘äº†å—ï¼Ÿ",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46415/raw#é†’æ¥.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46546/raw#8.MP3",
                        title: "ï¼ˆæˆ‘ï¼‰"
                    }
                ],
                title: "æŠ±æŠ±é¾™",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46510/raw#say_need_test.mp4" },
                    { url: "https://cross.keepwork.com/api/raw/maisi/maisi/webgames/data/select_egg_guide" }
                ],
                id: "dialog_1"
            },
            'New_USER_TASK': {
                dialogData: [
                    {
                        text: "ä½ å¥½å•Šï¼Œäº²çˆ±çš„æ˜Ÿçƒå±…æ°‘ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46460/raw#xin1.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46548/raw#10.MP3"
                    },
                    {
                        text: "æˆ‘å·²ä¸ºä½ å¼€å¯è¯•ç‚¼ä¹‹è·¯ï¼Œå¿«å»å®Œæˆä»Šæ—¥çš„æ‰€æœ‰æŒ‘æˆ˜å§ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46462/raw#xin3.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46549/raw#11.MP3"
                    },
                    {
                        text: "å®Œæˆä»Šæ—¥å…¨éƒ¨æŒ‘æˆ˜ï¼Œè¯·å›åˆ°æ­¤å¤„æ‰¾æˆ‘ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46463/raw#xin4.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46550/raw#12.MP3"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                id: "dialog_3"
            },
            'New_USER_TASK_TOMORROW': {
                dialogData: [
                    {
                        text: "ä»Šæ—¥çš„æ–°æ‰‹ä»»åŠ¡å·²å®Œæˆï¼Œæ˜å¤©å†æ¥å§ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46460/raw#xin1.jpg"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                id: "dialog_4"
            },
            'FEED_PET_DIALOG': {
                dialogData: [
                    {
                        text: "å‘œ~æˆ‘é¥¿äº†ä¸»äººï¼å¬è¯´è“è“+ç‰›å¥¶åšçš„é¥®å“å¯ç”œå•¦ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46478/raw#ren1.jpg"
                    },
                    {
                        text: "æˆ‘æƒ³åƒã€‚ã€‚æ‰€ä»¥ä½ èƒ½å¸®æˆ‘å»æ‰¾ç‚¹æ–°é²œçš„è“è“å’Œé¦™é¦™çš„ç‰›å¥¶å—ï¼Ÿ",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46479/raw#ren2.jpg"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                id: "dialog_5"
            },
            'GET_EGG_DIALOG': {
                dialogData: [
                    {
                        text: "ä¸»äººï¼Œæˆ‘æ¥å•¦ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46525/raw#dan.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46551/raw#13.MP3"
                    }
                ],
                title: "æŠ±æŠ±é¾™",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46443/raw#dragon_egg_select_complete.mp4" }
                ],
                id: "dialog_6"
            },
            'WASD_MOVE_DIALOG': {
                dialogData: [
                    {
                        text: "ä½ å¥½ï¼Œæˆ‘æ˜¯ç¥æ®¿å®ˆæŠ¤è€…ã€‚æ­å–œä½ è·å¾—äº†ä¸€æšé¾™è›‹ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46512/raw#è·å¾—é¾™è›‹.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46570/raw#shen_dian_shou_zhe.MP3"
                    },
                    {
                        text: "è¿™æšè›‹ç°åœ¨å·²ç»å±äºä½ äº†ï¼Œä¸ºäº†è®©å®ƒå¯ä»¥é¡ºåˆ©å­µåŒ–ï¼Œæˆ‘ä»¬å¸¦ç€å®ƒèµ°åŠ¨ä¸€ä¸‹å§ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46517/raw#è¡Œèµ°.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46571/raw#egg_is_yours.MP3"
                    },
                    {
                        text: "ä½¿ç”¨ç”µè„‘æ“ä½œæ—¶æŒ‰é”®ç›˜Wã€Aã€Sã€Dé”®äººç‰©å¯ä»¥è¡Œèµ°ï¼ŒæŒ‰ä½é¼ æ ‡å³é”®åŒæ—¶ç§»åŠ¨é¼ æ ‡å¯æ”¹å˜è§†è§‰ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46166/raw#æ–°æ‰‹å¼•å¯¼-7.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46572/raw#use_computer.MP3"
                    },
                    {
                        text: "ä½¿ç”¨æ‰‹æœºæˆ–å¹³æ¿æ—¶ï¼Œå·¦ä¸‹è§’æ‘‡æ†æ§åˆ¶äººç‰©è¡ŒåŠ¨ï¼Œå³æ‰‹æ»‘åŠ¨å¯æ”¹å˜è§†è§‰ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46167/raw#æ–°æ‰‹å¼•å¯¼-8.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46573/raw#use_phone.MP3"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46518/raw#zou.mp4" }
                ],
                id: "dialog_7"
            },
            "GET_SIGN_REWARD_DIALOG": {
                dialogData: [
                    {
                        text: "ä½ å°†å¯ä»¥ä»ä»¥ä¸‹å¥–åŠ±ä¸­æŒ‘é€‰ä¸€æ ·å¸¦èµ°å™¢ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46534/raw#liwu.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46569/raw#take_one_away.MP3"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46455/raw#get_reward.mp4" }
                ],
                id: "get_sign_in_reward"
            },
            "GET_ALL_REWARD_DIALOG": {
                dialogData: [
                    {
                        text: "æ­å–œä½ ï¼Œè·å¾—äº†å¥–åŠ±ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46534/raw#liwu.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46663/raw#get_all_reward.MP3"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46455/raw#get_reward.mp4" }
                ],
                id: "get_task_reward"
            },
            "TIP_CLICK_TASK_BTN": {
                dialogData: [
                    {
                        text: "è¯·è¯•ç€ç‚¹å‡»ç•Œé¢å·¦ä¸Šè§’çš„ä»»æ„ä»»åŠ¡ä¸­çš„å‰å¾€æŒ‰é’®ï¼Œå¹¶è¯•ç€ä½“éªŒä»Šæ—¥æŒ‘æˆ˜ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46534/raw#liwu.jpg"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                id: "tip_click_task_btn"
            },
            "OPEN_EGG_DIALOG": {
                dialogData: [
                    {
                        text: "ä¸»äººï¼Œæˆ‘å‡ºæ¥äº†ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46525/raw#dan.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46562/raw#egg_to_dragon.MP3"
                    }
                ],
                title: "æŠ±æŠ±é¾™",
                steps: [
                    { video: {
                        'orange': "https://api.keepwork.com/ts-storage/siteFiles/46464/raw#æ©™è‰²è›‹.mp4",
                        'green': "https://api.keepwork.com/ts-storage/siteFiles/46465/raw#ç»¿è‰²è›‹.mp4",
                        'purple': "https://api.keepwork.com/ts-storage/siteFiles/46466/raw#ç´«è‰²è›‹.mp4"
                    }}
                ],
                id: "open_egg"
            },
            'DRAGON_FIRST_MEETING_DIALOG': {
                dialogData: [
                    {
                        text: "ä½ å¥½ï¼Œäº²çˆ±çš„ä¸»äººï¼æˆ‘èƒ½æ„Ÿå—åˆ°ä½ æ¸©æš–çš„å¿ƒçµã€‚",
                        image:{
                            'orange':'https://api.keepwork.com/ts-storage/siteFiles/46636/raw#08-2.jpg',
                            'green':'https://api.keepwork.com/ts-storage/siteFiles/46637/raw#08-1.jpg',
                            'purple':'https://api.keepwork.com/ts-storage/siteFiles/46635/raw#08-3.png'
                        },
                        mp3: {
                            'orange':'https://api.keepwork.com/ts-storage/siteFiles/46699/raw#æŠ±æŠ±é¾™ï¼šä½ å¥½äº²çˆ±çš„ä¸»äºº.MP3',
                            'green':'https://api.keepwork.com/ts-storage/siteFiles/46699/raw#æŠ±æŠ±é¾™ï¼šä½ å¥½äº²çˆ±çš„ä¸»äºº.MP3',
                            'purple':'https://api.keepwork.com/ts-storage/siteFiles/46699/raw#æŠ±æŠ±é¾™ï¼šä½ å¥½äº²çˆ±çš„ä¸»äºº.MP3'
                        },
                        title: "æŠ±æŠ±é¾™"
                    },
                    {
                        text: "å“‡ï¼ä½ çœŸçš„ä¼šè¯´è¯ï¼å¤ªç¥å¥‡äº†ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46691/raw#go1.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46701/raw#è‡ªå·±ï¼šå“‡ä½ çœŸçš„ä¼šè¯´è¯.MP3",
                        title: "ï¼ˆæˆ‘ï¼‰"
                    },
                    {
                        text: "å½“ç„¶å•¦ï¼æˆ‘ä»¬æŠ±æŠ±é¾™å¤©ç”Ÿå°±æ‹¥æœ‰ä¸ä¸»äººå¿ƒçµç›¸é€šçš„èƒ½åŠ›ã€‚ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘ä¼šé™ªä¼´ä½ ä¸€èµ·æˆé•¿ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46692/raw#go2.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46700/raw#æŠ±æŠ±é¾™ï¼šå½“ç„¶å•¦.MP3",
                        title: "æŠ±æŠ±é¾™"
                    }
                ],
                title: "æŠ±æŠ±é¾™",
                id: "dragon_first_meeting"
            },
            'DRAGON_GROWTH_SYSTEM_DIALOG': {
                dialogData: [
                    {
                        text: "è®©æˆ‘ä¸ºä½ ä»‹ç»æŠ±æŠ±é¾™çš„æˆé•¿ç³»ç»Ÿã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46693/raw#go3.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46702/raw#å¯¼å¸ˆï¼šè®©æˆ‘ä¸ºä½ ä»‹ç».MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "æŠ±æŠ±é¾™æœ‰å››ä¸ªé‡è¦å±æ€§ï¼šçˆ±å¿ƒå€¼ã€æ™ºæ…§å€¼ã€åŠ›é‡å€¼å’Œæ•æ·å€¼ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46693/raw#go3.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46703/raw#å¯¼å¸ˆï¼šå››ä¸ªå±æ€§.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "é€šè¿‡å®Œæˆå„ç§è„‘åŠ›æŒ‘æˆ˜ï¼ŒæŠ±æŠ±é¾™çš„è¿™äº›å±æ€§éƒ½ä¼šå¾—åˆ°æå‡ï¼Œå®ƒä¼šå˜å¾—è¶Šæ¥è¶Šå¼ºå¤§ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46772/raw#bbl.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46704/raw#å¯¼å¸ˆï¼šè¶Šæ¥è¶Šå¼ºå¤§.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                id: "dragon_growth_system"
            },
            'ACADEMY_INTRO': {
                dialogData: [
                    {
                        text: "æ¬¢è¿æ¥åˆ°éº¦æ€å­¦é™¢ï¼è¿™é‡Œæ˜¯æ˜Ÿçƒä¸Šæœ€å…ˆè¿›çš„èƒ½åŠ›æµ‹è¯„ä¸­å¿ƒã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46460/raw#academy_intro.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46548/raw#academy_welcome.MP3",
                        title: "å­¦é™¢å¯¼å¸ˆ"
                    },
                    {
                        text: "åœ¨å­¦é™¢ä¸­ï¼Œæˆ‘ä»¬æä¾›ä¸“ä¸šçš„èƒ½åŠ›æµ‹è¯„ï¼Œå¸®åŠ©ä½ å’ŒæŠ±æŠ±é¾™å‘ç°çœŸæ­£çš„æ½œèƒ½ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46462/raw#academy_assessment.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46549/raw#professional_assessment.MP3",
                        title: "å­¦é™¢å¯¼å¸ˆ"
                    },
                    {
                        text: "å¼€é€š398å¤§ä¼šå‘˜ï¼Œå³å¯è·å¾—å®Œæ•´çš„æµ‹è¯„æŠ¥å‘Šå’Œä¸ªæ€§åŒ–æˆé•¿æ–¹æ¡ˆï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46463/raw#member_benefits.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46550/raw#member_benefits.MP3",
                        title: "å­¦é™¢å¯¼å¸ˆ"
                    }
                ],
                title: "å­¦é™¢å¯¼å¸ˆ",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46518/raw#academy_showcase.mp4" }
                ],
                id: "academy_intro"
            },
                        // === PAPA ç³»åˆ—ï¼ˆå·²ç¡®ä¿å¯¹è±¡é—´ç”¨é€—å·åˆ†éš”ï¼‰ ===
            'PAPA_NAVIGATION_TUTORIAL_VIDEO': {
                dialogData: [
                    { text: "ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„æ•…äº‹å‘å¯¼å¸•å¸•ã€‚åœ¨è¿™ä¸ªå……æ»¡æƒŠå–œçš„æ˜Ÿçƒä¸­ï¼Œå¿«é€Ÿç§»åŠ¨æ˜¯æ¢ç´¢çš„å…³é”®ã€‚", image: "https://api.keepwork.com/ts-storage/siteFiles/47105/raw#pa1.jpg", title: "å¸•å¸•" },
                    { text: "æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šè®©ä½ çœ‹ä¸€æ®µè§†é¢‘ï¼Œå­¦ä¼šå¦‚ä½•é€šè¿‡ç®€å•çš„ç‚¹å‡»ï¼Œè½»æ¾ä¼ é€åˆ°ä»»ä½•æƒ³å»çš„åœ°æ–¹ã€‚", image: "https://api.keepwork.com/ts-storage/siteFiles/47106/raw#pa2.jpg", title: "å¸•å¸•" }
                ],
                title: "å¸•å¸•",
                steps: [ { video: "https://api.keepwork.com/ts-storage/siteFiles/47109/raw#å¾®ä¿¡è§†é¢‘2025-10-24_001630_352.mp4" } ],
                id: "NAVIGATION_TUTORIAL_VIDEO"
            },

            'PAPA_ROLEPLAY_TUTORIAL_VIDEO': {
                dialogData: [
                    { text: "æƒ³è¦çœŸæ­£èå…¥è¿™ä¸ªå¥‡å¦™çš„æ˜Ÿçƒå—ï¼Ÿé€šè¿‡é™„èº«åˆ°ä¸åŒè§’è‰²ï¼Œä½ å¯ä»¥ä½“éªŒä»–ä»¬çš„è§†è§’ã€‚", image: "https://api.keepwork.com/ts-storage/siteFiles/47107/raw#pa3.jpg", title: "å¸•å¸•" },
                    { text: "æ§åˆ¶ä»–ä»¬çš„åŠ¨ä½œï¼Œç”šè‡³åšå‡ºå„ç§æœ‰è¶£çš„è¡¨æƒ…ã€‚è¿™æ˜¯æ¢ç´¢ä¸–ç•Œæœ€æœ‰è¶£çš„æ–¹å¼ï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47105/raw#pa1.jpg", title: "å¸•å¸•" }
                ],
                title: "å¸•å¸•",
                steps: [ { video: "https://api.keepwork.com/ts-storage/siteFiles/47111/raw#å¾®ä¿¡è§†é¢‘2025-10-24_001641_356.mp4" } ],
                id: "ROLEPLAY_TUTORIAL_VIDEO"
            },

            'PAPA_EXPRESSION_TUTORIAL_VIDEO': {
                dialogData: [
                    { text: "ç°åœ¨è®©æˆ‘ä»¬æ·±å…¥æ¢ç´¢è¡¨æƒ…ç³»ç»Ÿï¼æ¯ä¸ªè§’è‰²éƒ½æœ‰ç€ä¸°å¯Œçš„æƒ…æ„Ÿä¸–ç•Œã€‚", image: "https://api.keepwork.com/ts-storage/siteFiles/47106/raw#pa2.jpg", title: "å¸•å¸•" },
                    { text: "é€šè¿‡æŒæ¡è¡¨æƒ…æ§åˆ¶ï¼Œä½ å¯ä»¥è®©è§’è‰²å±•ç°å‡ºå–œæ€’å“€ä¹å„ç§æƒ…æ„Ÿï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47107/raw#pa3.jpg", title: "å¸•å¸•" }
                ],
                title: "å¸•å¸•",
                steps: [ { video: "https://api.keepwork.com/ts-storage/siteFiles/47112/raw#å¾®ä¿¡è§†é¢‘2025-10-24_001650_691.mp4" } ],
                id: "EXPRESSION_TUTORIAL_VIDEO"
            },

            'PAPA_ENVIRONMENT_TUTORIAL_VIDEO': {
                dialogData: [
                    { text: "æƒ³è¦æˆä¸ºä¸–ç•Œçš„é€ ç‰©ä¸»å—ï¼Ÿè¯•è¯•ä½¿ç”¨ç¯å¢ƒå·¥å…·å§ï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47105/raw#pa1.jpg", title: "å¸•å¸•" },
                    { text: "é€šè¿‡æŒæ¡å¤©æ°”æ§åˆ¶ã€æ—¶é—´è°ƒèŠ‚ã€å…‰å½±æ•ˆæœï¼Œä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°æ”¹å˜æ•´ä¸ªä¸–ç•Œçš„æ°›å›´ï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47106/raw#pa2.jpg", title: "å¸•å¸•" }
                ],
                title: "å¸•å¸•",
                steps: [ { video: "https://api.keepwork.com/ts-storage/siteFiles/47114/raw#å¾®ä¿¡è§†é¢‘2025-10-24_001656_770.mp4" } ],
                id: "ENVIRONMENT_TUTORIAL_VIDEO"
            },

            'PAPA_BUILDING_TUTORIAL_VIDEO': {
                dialogData: [
                    { text: "æƒ³è¦å»ºé€ å±äºè‡ªå·±çš„æ¢¦æƒ³å®¶å›­å—ï¼Ÿè®©æˆ‘æ¥æ•™ä½ å¦‚ä½•ä½¿ç”¨å¼ºå¤§çš„å»ºé€ ç³»ç»Ÿï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47107/raw#pa3.jpg", title: "å¸•å¸•" },
                    { text: "é€šè¿‡æŒæ¡é¢œè‰²é€‰æ‹©ã€æ–¹å—æè´¨ã€å»ºé€ å·¥å…·ï¼Œä½ å¯ä»¥åˆ›é€ å‡ºç‹¬ä¸€æ— äºŒçš„å»ºç­‘ä½œå“ï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47105/raw#pa1.jpg", title: "å¸•å¸•" }
                ],
                title: "å¸•å¸•",
                steps: [ { video: "https://api.keepwork.com/ts-storage/siteFiles/47110/raw#å¾®ä¿¡è§†é¢‘2025-10-24_001708_504.mp4" } ],
                id: "BUILDING_TUTORIAL_VIDEO"
            },

            'PAPA_ITEM_POCKET_TUTORIAL_VIDEO': {
                dialogData: [
                    { text: "æƒ³è¦æˆä¸ºæ¨¡å‹ç®¡ç†ä¸“å®¶å—ï¼Ÿè®©æˆ‘æ•™ä½ å¦‚ä½•ä½¿ç”¨å¼ºå¤§çš„ç‰©å“ç³»ç»Ÿå’Œç¥å¥‡çš„å£è¢‹åŠŸèƒ½ï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47106/raw#pa2.jpg", title: "å¸•å¸•" },
                    { text: "é€šè¿‡æŒæ¡ç‰©å“æŒ‰é’®çš„ä½¿ç”¨ï¼Œä½ å¯ä»¥è®¿é—®ä¸–ç•Œä¸­çš„å…¨éƒ¨æ¨¡å‹èµ„æºï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47107/raw#pa3.jpg", title: "å¸•å¸•" }
                ],
                title: "å¸•å¸•",
                steps: [ { video: "https://api.keepwork.com/ts-storage/siteFiles/47111/raw#å¾®ä¿¡è§†é¢‘2025-10-24_001641_356.mp4" } ],
                id: "ITEM_POCKET_TUTORIAL_VIDEO"
            },

            'PAPA_SAVE_SYSTEM_TUTORIAL_VIDEO': {
                dialogData: [
                    { text: "æƒ³è¦è®©ä½ çš„åˆ›ä½œæ°¸è¿œä¿å­˜å—ï¼Ÿè®©æˆ‘æ•™ä½ å¦‚ä½•ä½¿ç”¨å¼ºå¤§çš„å­˜æ¡£ç³»ç»Ÿï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47105/raw#pa1.jpg", title: "å¸•å¸•" },
                    { text: "é€šè¿‡æŒæ¡æœ¬åœ°å­˜æ¡£ã€äº‘å­˜æ¡£ä¸Šä¼ ã€å­˜æ¡£åŠ è½½ï¼Œä½ å¯ä»¥ä¿æŠ¤è‡ªå·±çš„åˆ›ä½œæˆæœï¼", image: "https://api.keepwork.com/ts-storage/siteFiles/47106/raw#pa2.jpg", title: "å¸•å¸•" }
                ],
                title: "å¸•å¸•",
                steps: [ { video: "https://api.keepwork.com/ts-storage/siteFiles/47108/raw#å¾®ä¿¡è§†é¢‘2025-10-24_001702_404.mp4" } ],
                id: "SAVE_SYSTEM_TUTORIAL_VIDEO"
            },
            // === PAPA ç³»åˆ—ç»“æŸ ===
            'MEMBER_BENEFITS_SHOWCASE': {
                dialogData: [
                    {
                        text: "çœ‹ï¼è¿™å°±æ˜¯398å¤§ä¼šå‘˜ä¸“äº«çš„é¾™æ—å¥—è£…ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46534/raw#premium_suits.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46569/raw#premium_showcase.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "æ˜Ÿå…‰å¥—è£…ã€é›·ç”µç‰¹æ•ˆã€è¿˜æœ‰å„ç§ç‚«é…·çš„ä¸“å±æŠ€èƒ½åŠ¨ç”»ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46535/raw#special_effects.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46570/raw#special_effects.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "æ›´é‡è¦çš„æ˜¯ï¼Œä¼šå‘˜å¯ä»¥è§£é”æŠ±æŠ±é¾™çš„ä¼ è¯´å½¢æ€ï¼é‚£æ˜¯çœŸæ­£çš„é¾™æ—ç‹è€…ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46536/raw#legendary_form.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46571/raw#legendary_dragon.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46519/raw#member_showcase.mp4" }
                ],
                id: "member_benefits"
            },
            'DRAGON_TRANSFORMATION': {
                dialogData: [
                    {
                        text: "æ„Ÿå—åˆ°äº†å—ï¼ŸæŠ±æŠ±é¾™ä½“å†…çš„åŠ›é‡æ­£åœ¨è§‰é†’ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46525/raw#transformation1.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46562/raw#power_awakening.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "å“‡ï¼æˆ‘æ„Ÿè§‰åˆ°ä¸€è‚¡æš–æµåœ¨ä½“å†…æµæ·Œï¼ŒåŠ›é‡åœ¨ä¸æ–­å¢å¼ºï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46526/raw#transformation2.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46563/raw#power_flow.MP3",
                        title: "æŠ±æŠ±é¾™"
                    },
                    {
                        text: "è¿™å°±æ˜¯æˆé•¿çš„åŠ›é‡ï¼ä½†è¿™åªæ˜¯å¼€å§‹ï¼ŒçœŸæ­£çš„ä¼ è¯´å½¢æ€è¿˜éœ€è¦åœ¨å­¦é™¢ä¸­è§£é”ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46527/raw#transformation3.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46564/raw#beginning_power.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46520/raw#dragon_evolution_mid.mp4" }
                ],
                id: "dragon_transformation"
            },
            'LEGENDARY_DRAGON': {
                dialogData: [
                    {
                        text: "ç»è¿‡æ— æ•°æ¬¡çš„æŒ‘æˆ˜å’Œæˆé•¿ï¼ŒæŠ±æŠ±é¾™ç»ˆäºè¾¾åˆ°äº†ä¼ è¯´çº§åˆ«ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46530/raw#legendary1.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46565/raw#legendary_achieved.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "ä¸»äººï¼æˆ‘ç°åœ¨æ‹¥æœ‰äº†å‰æ‰€æœªæœ‰çš„åŠ›é‡ï¼æ„Ÿè°¢ä½ ä¸€è·¯çš„é™ªä¼´ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46531/raw#legendary2.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46566/raw#grateful_dragon.MP3",
                        title: "ä¼ è¯´æŠ±æŠ±é¾™"
                    },
                    {
                        text: "è¿™å°±æ˜¯398å¤§ä¼šå‘˜çš„çœŸæ­£ä»·å€¼ï¼å®Œæ•´çš„æˆé•¿ä¹‹è·¯ï¼Œä¸“å±çš„ä¼ è¯´å½¢æ€ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46532/raw#legendary3.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46567/raw#member_value.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46521/raw#legendary_evolution.mp4" }
                ],
                id: "legendary_dragon"
            },
            'FINAL_CALL_TO_ACTION': {
                dialogData: [
                    {
                        text: "äº²çˆ±çš„è®­ç»ƒå¸ˆï¼Œä½ å’ŒæŠ±æŠ±é¾™çš„å†’é™©æ‰åˆšåˆšå¼€å§‹ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46533/raw#final_call.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46568/raw#adventure_begins.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "æƒ³è¦è§£é”æ›´å¤šç²¾å½©å†…å®¹å—ï¼Ÿ398å¤§ä¼šå‘˜ä¸ºä½ æ‰“å¼€é€šå¾€ä¼ è¯´çš„å¤§é—¨ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46534/raw#membership_door.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46569/raw#legendary_door.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    },
                    {
                        text: "ç°åœ¨å°±å¼€é€šä¼šå‘˜ï¼Œè®©æŠ±æŠ±é¾™æˆä¸ºçœŸæ­£çš„é¾™æ—ä¼ è¯´ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46535/raw#become_legend.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46570/raw#become_legend.MP3",
                        title: "ç¥æ®¿å®ˆæŠ¤è€…"
                    }
                ],
                title: "ç¥æ®¿å®ˆæŠ¤è€…",
                steps: [
                    { url: "https://cross.keepwork.com/api/raw/maisi/maisi/webgames/data/membership_signup" }
                ],
                id: "final_call_to_action"
            },
            'DRAGON_GROWTH_STORY_1': {
                dialogData: [
                    {
                        text: "äº²çˆ±çš„æ˜Ÿçƒå±…æ°‘ï¼ŒæŠ±æŠ±é¾™ä¼¼ä¹æœ‰è¯å¯¹ä½ è¯´â€¦â€¦",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46693/raw#go3.jpg",
                        mp3: "https://api.keepwork.com/ts-storage/siteFiles/46727/raw#qin.MP3"
                    }
                ],
                title: "æŠ±æŠ±é¾™",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46728/raw#jinhuale.mp4" }
                ],
                id: "dragon_growth_story_1"
            },
            'ATTENTION_TOKEN': {
                dialogData: [
                    {
                        text: "ä»¤äººå°è±¡æ·±åˆ»ï¼ä½ çš„ä¸“æ³¨åŠ›éå¸¸å¼ºå¤§ã€‚è¿™æšæ³¨æ„åŠ›å¤©èµ‹ä»¤ç‰Œå±äºä½ äº†ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46750/raw#lanfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "è®°ä½ï¼Œ24å°æ—¶å†…æ‰¾åˆ°å°éº¦è€å¸ˆæŠ¥åï¼Œå¦åˆ™ä»¤ç‰Œçš„åŠ›é‡ä¼šæ¶ˆæ•£ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46752/raw#xiaomai.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "å“‡ï¼Œæ³¨æ„åŠ›å¤©èµ‹ä»¤ç‰Œï¼è¿™å¯æ˜¯æœ€éš¾è·å¾—çš„ä»¤ç‰Œä¹‹ä¸€ã€‚ä½ å‡†å¤‡å¥½è¿›å…¥æˆ¿é—´ï¼Œé¢å¯¹æ³¨æ„åŠ›ç¥çŸ³çš„ç»ˆæè€ƒéªŒäº†å—ï¼Ÿ",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46753/raw#lanshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "attention_token"
            },
            'THINKING_TOKEN': {
                dialogData: [
                    {
                        text: "ä¸å¯æ€è®®ï¼ä½ çš„æ€ç»´å¦‚æ˜Ÿè¾°èˆ¬é—ªè€€ã€‚è¿™æšæ€ç»´èƒ½åŠ›å¤©èµ‹ä»¤ç‰Œè§è¯äº†ä½ çš„æ™ºæ…§ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46755/raw#fenfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "å¿«å»æ‰¾å°éº¦è€å¸ˆå§ï¼Œæ€ç»´ç¥çŸ³æ­£ç­‰å¾…ç€çœŸæ­£çš„æ™ºè€…ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46752/raw#xiaomai.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "æ€ç»´ç¥çŸ³æ®è¯´èƒ½è®©é€šè¿‡è€…è·å¾—'æ´å¯Ÿä¸‡ç‰©'çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿç¬é—´çœ‹ç©¿äº‹ç‰©çš„æœ¬è´¨å’Œå†…åœ¨è”ç³»ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46757/raw#fenshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "thinking_token"
            },
            'LEARNING_TOKEN': {
                dialogData: [
                    {
                        text: "amazingï¼ä½ æŒæ¡äº†å­¦ä¹ çš„çœŸè°›ã€‚è¿™æšå­¦ä¹ ç­–ç•¥å¤©èµ‹ä»¤ç‰Œä»£è¡¨ä½ æ‹¥æœ‰äº†å­¦ä¹ çš„é’¥åŒ™ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46758/raw#huangfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                   
                    {
                        text: "æ—¶é—´ä¸å¤šäº†ï¼Œè¦å»æ‰¾å°éº¦è€å¸ˆæŠ¥åå—ï¼Ÿ",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46752/raw#xiaomai.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                     {
                        text: "å­¦ä¹ ç­–ç•¥ç¥ç¢‘ä¼šç»™é€šè¿‡è€…'ä¸¾ä¸€åä¸‰'çš„èƒ½åŠ›ï¼Œè®©ä½ åœ¨ä»»ä½•é¢†åŸŸéƒ½èƒ½å¿«é€ŸæŒæ¡ç²¾é«“ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46759/raw#huangshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "learning_token"
            },
            'STRATEGY_TOKEN': {
                dialogData: [
                    {
                        text: "amazingï¼ä½ æŒæ¡äº†å­¦ä¹ çš„çœŸè°›ã€‚è¿™æšå­¦ä¹ ç­–ç•¥å¤©èµ‹ä»¤ç‰Œä»£è¡¨ä½ æ‹¥æœ‰äº†å­¦ä¹ çš„é’¥åŒ™ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46758/raw#huangfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                   
                    {
                        text: "æ—¶é—´ä¸å¤šäº†ï¼Œè¦å»æ‰¾å°éº¦è€å¸ˆæŠ¥åå—ï¼Ÿ",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46752/raw#xiaomai.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                     {
                        text: "å­¦ä¹ ç­–ç•¥ç¥ç¢‘ä¼šç»™é€šè¿‡è€…'ä¸¾ä¸€åä¸‰'çš„èƒ½åŠ›ï¼Œè®©ä½ åœ¨ä»»ä½•é¢†åŸŸéƒ½èƒ½å¿«é€ŸæŒæ¡ç²¾é«“ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46759/raw#huangshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "strategy_token"
            },
            'MOTIVATION_TOKEN': {
                dialogData: [
                  
                    {
                        text: "è¿™æšåŠ¨æœºå¤©èµ‹ä»¤ç‰Œè§è¯äº†ä½ å¼ºå¤§çš„å†…é©±åŠ›ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46760/raw#hongfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                      {
                        text: "ä¼˜ç§€ï¼ä½ è¯æ˜äº†ä»€ä¹ˆæ˜¯çœŸæ­£çš„å†…åœ¨åŠ¨æœºã€‚ä¸æ˜¯å¤–åœ¨çš„å¥–åŠ±é©±åŠ¨ä½ å‰è¿›ï¼Œè€Œæ˜¯å¯¹ç›®æ ‡çš„çƒ­çˆ±å’Œå¯¹è‡ªæˆ‘æå‡çš„æ¸´æœ›ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46751/raw#wang.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "å­¦ä¹ åŠ¨æœºä»¤ç‰Œæ•£å‘ç€æ¸©æš–çš„å…‰èŠ’ï¼Œå°±åƒä½ å†…å¿ƒçš„ç«ç„°ã€‚åŠ¨æœºç¥çŸ³çš„è€ƒéªŒæ®è¯´æœ€ä¸ºä¸¥è‹›ï¼Œä½†é€šè¿‡è€…å°†è·å¾—'æ°¸ä¸è¨€å¼ƒ'çš„ç²¾ç¥åŠ›é‡ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46761/raw#hongshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "motivation_token"
            },
            'QUALITY_TOKEN': {
                dialogData: [
                    {
                        text: "å­¦ä¹ å“è´¨ä»¤ç‰Œï¼è¿™æ˜¯æœ€çº¯æ´çš„ä»¤ç‰Œï¼Œåªæœ‰å“æ ¼é«˜å°šçš„äººæ‰èƒ½è·å¾—ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46762/raw#chengfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "å¤ªæ£’äº†ï¼ä½ å±•ç°äº†é«˜å°šçš„å“æ ¼ã€‚è¿™æšå­¦ä¹ å“è´¨å¤©èµ‹ä»¤ç‰Œè§è¯äº†ä½ çš„äººæ ¼é­…åŠ›ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46751/raw#wang.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "å“è´¨ç¥ç¢‘ä¼šèµ‹äºˆé€šè¿‡è€…'è¯šä¿¡ä¹‹å…‰'ï¼Œè®©ä½ åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½åšæŒæ­£ç¡®çš„é€‰æ‹©ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46763/raw#chengshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "quality_token"
            },
            'EMOTIONAL_TOKEN': {
                dialogData: [
                    {
                        text: "è¿™æšæƒ…ç»ªæ™ºåŠ›å¤©èµ‹ä»¤ç‰Œä»£è¡¨ä½ çš„å…±æƒ…èƒ½åŠ›ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46764/raw#qingfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                     {
                        text: "ä½ å±•ç°äº†éå‡¡çš„æƒ…ç»ªæ™ºåŠ›ï¼ä½ ä¸ä»…ç†è§£äº†ä»–äººçš„æƒ…æ„Ÿï¼Œè¿˜ç»™å‡ºäº†æ°å½“çš„æ”¯æŒï¼ŒåŒæ—¶ä¿æŒäº†è‡ªå·±çš„æƒ…ç»ªå¹³è¡¡ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46751/raw#wang.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "æƒ…ç»ªæ™ºåŠ›ä»¤ç‰Œæ¸©æš–å¦‚æ˜¥é£ï¼è¿™ç±»ä»¤ç‰Œå¾ˆå°‘è§ï¼Œå› ä¸ºå®ƒéœ€è¦çœŸæ­£çš„åŒç†å¿ƒã€‚æƒ…ç»ªæ™ºåŠ›ç¥ç¢‘ä¼šç»™é€šè¿‡è€…'æƒ…æ„Ÿæ²»æ„ˆ'çš„èƒ½åŠ›ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46765/raw#qingshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "emotional_token"
            },
            'CREATIVITY_TOKEN': {
                dialogData: [
                     {
                        text: "è¿™æšåˆ›é€ åŠ›å¤©èµ‹ä»¤ç‰Œè§è¯äº†ä½ çš„åˆ›æ–°ç²¾ç¥ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46754/raw#lvfu.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "ä»¤äººæƒŠå¹çš„åˆ›æ„ï¼ä½ çš„ä½œå“ä¸ä»…æ–°é¢–ç‹¬ç‰¹ï¼Œè¿˜å……æ»¡äº†å®ç”¨ä»·å€¼ã€‚çœŸæ­£çš„åˆ›é€ è€…ä¸æ˜¯å¤åˆ¶åˆ«äººçš„æƒ³æ³•ï¼Œè€Œæ˜¯å¼€è¾Ÿå…¨æ–°çš„é“è·¯ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46751/raw#wang.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "åˆ›é€ åŠ›æ•£å‘ç€ç»¿è‰²çš„å…‰èŠ’ï¼Œå®é™…ä¸Šæ¯ä¸ªè§’åº¦éƒ½æœ‰ä¸åŒçš„è‰²å½©ã€‚åˆ›é€ åŠ›ç¥ç¢‘æ˜¯æœ€ç¥ç§˜çš„ï¼Œä¼ è¯´é€šè¿‡è€…ä¼šè·å¾—'ç‚¹çŸ³æˆé‡‘'çš„åˆ›æ„èƒ½åŠ›ã€‚",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46766/raw#lvshi.jpg",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                id: "creativity_token"
            },
            'TALENT_CONTEST': {
                dialogData: [
                    {
                        text: "æ¬¢è¿å‚åŠ éº¦æ€æ˜Ÿçƒå¤©èµ‹æµ‹è¯„å¤§èµ›ï¼",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46751/raw#wang.jpg",
                        title: "ç‹æ ¡é•¿"
                    },
                    {
                        text: "è¿™é‡Œå°†æµ‹è¯•ä½ åœ¨å„ä¸ªé¢†åŸŸçš„å¤©èµ‹æ½œèƒ½ï¼Œå¸®åŠ©ä½ å‘ç°è‡ªå·±çš„ç‹¬ç‰¹æ‰åã€‚å‡†å¤‡å¥½å¼€å§‹ä½ çš„å¤©èµ‹å‘ç°ä¹‹æ—…äº†å—ï¼Ÿ",
                        image: "https://api.keepwork.com/ts-storage/siteFiles/46756/raw#0C956607-8FD8-4c59-B562-41B19321AAB9_compressed.png",
                        title: "ç‹æ ¡é•¿"
                    }
                ],
                title: "ç‹æ ¡é•¿",
                steps: [
                    { video: "https://api.keepwork.com/ts-storage/siteFiles/46734/raw#juqing1.mp4" }
                ],
                id: "talent_contest"
            }
        }

        // åˆå§‹åŒ–è¯­éŸ³ç³»ç»Ÿ
        function initVoices() {
            if ('speechSynthesis' in window) {
                // ç¡®ä¿è¯­éŸ³åˆ—è¡¨å·²åŠ è½½
                const loadVoices = () => {
                    const voices = speechSynthesis.getVoices();
                    if (voices.length > 0) {
                        voicesLoaded = true;
                        //console.log('å¯ç”¨è¯­éŸ³:', voices.map(v => v.name));

                        // ç§»åŠ¨ç«¯é¢å¤–å¤„ç†ï¼šé¢„åŠ è½½è¯­éŸ³
                        if (isMobileDevice()) {
                            // åœ¨ç§»åŠ¨ç«¯é¢„å…ˆåˆ›å»ºä¸€ä¸ªè¯­éŸ³å®ä¾‹æ¥ç¡®ä¿è¯­éŸ³å¼•æ“å‡†å¤‡å°±ç»ª
                            const testUtterance = new SpeechSynthesisUtterance('');
                            testUtterance.volume = 0;
                            speechSynthesis.speak(testUtterance);
                        }
                    }
                };

                // ç›‘å¬è¯­éŸ³åˆ—è¡¨å˜åŒ–
                speechSynthesis.onvoiceschanged = loadVoices;
                loadVoices(); // ç«‹å³å°è¯•åŠ è½½

                // ç§»åŠ¨ç«¯å¼ºåˆ¶è§¦å‘è¯­éŸ³åˆ—è¡¨åŠ è½½
                if (isMobileDevice()) {
                    // åœ¨ç§»åŠ¨ç«¯ï¼Œæœ‰æ—¶éœ€è¦æ‰‹åŠ¨è§¦å‘è¯­éŸ³åˆ—è¡¨åŠ è½½
                    setTimeout(() => {
                        speechSynthesis.getVoices();
                    }, 100);
                }
            }
        }

         // æŒ‰é¡ºåºæ‰§è¡Œstepsæ•°ç»„ä¸­çš„æ­¥éª¤
        function executeSteps(steps, currentIndex) {
            // è®¾ç½®å…¨å±€å˜é‡
            currentSteps = steps;
            currentStepIndex = currentIndex;

            if (currentIndex >= steps.length) {
                // æ‰€æœ‰æ­¥éª¤æ‰§è¡Œå®Œæ¯•ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦å…³é—­çª—å£
                if (!configUrl || configUrl === "") {
                    //console.log('æ‰€æœ‰æ­¥éª¤æ‰§è¡Œå®Œæ¯•ï¼Œå…³é—­çª—å£');
                    window.parent.postMessage({ type: 'dialog', data: {
                        closeWindow: true,
                        id: game_config.id,
                    } }, '*');
                }
                return;
            }

            const step = steps[currentIndex];
            //console.log('æ‰§è¡Œæ­¥éª¤', currentIndex + 1, ':', step);

            if (step.video && step.video !== "") {
                // æ‰§è¡Œè§†é¢‘æ’­æ”¾æ­¥éª¤
                playVideoStep(step.video, () => {
                    // è§†é¢‘æ’­æ”¾å®Œæˆåæ‰§è¡Œä¸‹ä¸€æ­¥
                    executeSteps(steps, currentIndex + 1);
                });
            } else if (step.url && step.url !== "") {
                // æ‰§è¡ŒURLåŠ è½½æ­¥éª¤
                loadUrlStep(step.url);
                // URLæ­¥éª¤ä¸è‡ªåŠ¨æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œéœ€è¦ç­‰å¾…ç”¨æˆ·äº¤äº’æˆ–ç‰¹å®šæ¡ä»¶
                // ä¸‹ä¸€æ­¥å°†é€šè¿‡å…¶ä»–æœºåˆ¶è§¦å‘ï¼ˆå¦‚ç”¨æˆ·å…³é—­URLé¡µé¢ï¼‰
            } else {
                // è·³è¿‡æ— æ•ˆæ­¥éª¤
                //console.log('è·³è¿‡æ— æ•ˆæ­¥éª¤:', step);
                executeSteps(steps, currentIndex + 1);
            }
        }

         // æ’­æ”¾è§†é¢‘æ­¥éª¤
        function playVideoStep(videoUrl, onComplete) {
            const videoPlayer = document.getElementById('videoPlayer');
            if (videoPlayer) {
                // éšè—å¯¹è¯æ¡†
                const dialogBox = document.getElementById('dialogBox');
                if (dialogBox) {
                    dialogBox.style.display = 'none';
                }

                // æ ¹æ®skiné€‰æ‹©è§†é¢‘URL
                const finalVideoUrl = getResourceBySkin(videoUrl, game_config.skin);
                console.log('æœ€ç»ˆè§†é¢‘URL:', finalVideoUrl);
                
                // è®¾ç½®è§†é¢‘æºå¹¶æ˜¾ç¤º
                videoPlayer.src = finalVideoUrl;
                videoPlayer.style.display = 'block';
                videoPlayer.style.position = 'fixed';
                videoPlayer.style.top = '0';
                videoPlayer.style.left = '0';
                videoPlayer.style.width = '100vw';
                videoPlayer.style.height = '100vh';
                videoPlayer.style.zIndex = '9999';
                videoPlayer.style.backgroundColor = '#000';
                videoPlayer.style.objectFit = 'contain';
                videoPlayer.controls = false;

                // æ·»åŠ æ’­æ”¾ç»“æŸäº‹ä»¶ç›‘å¬å™¨
                const onVideoEnded = function() {
                    //console.log('è§†é¢‘æ’­æ”¾ç»“æŸ');
                    videoPlayer.style.display = 'none';
                    videoPlayer.removeEventListener('ended', onVideoEnded);
                    if (videoPlayer.handleKeyPress) {
                        document.removeEventListener('keydown', videoPlayer.handleKeyPress);
                        videoPlayer.handleKeyPress = null;
                    }

                    // æ£€æŸ¥æ˜¯å¦ä¸ºstepsæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªæ­¥éª¤
                    let isLastStep = false;
                    if (currentSteps && currentStepIndex >= 0) {
                        isLastStep = currentStepIndex === currentSteps.length - 1;
                    } else {
                        isLastStep = true;
                    }
                    // å¦‚æœæ˜¯æœ€åä¸€ä¸ªæ­¥éª¤ï¼Œå‘é€videoEndedæ¶ˆæ¯
                    if (isLastStep) {
                        try {
                            window.parent.postMessage({
                                type: 'videoEnded',
                                data: {
                                    closeWindow: true,
                                    id: game_config ? game_config.id : 'unknown',
                                    from:game_config?game_config.from:'unknown',
                                }
                            }, '*');
                        } catch (error) {
                            console.error('å‘é€videoEndedæ¶ˆæ¯æ—¶å‡ºé”™:', error);
                        }
                    }

                    onComplete();
                };
                videoPlayer.addEventListener('ended', onVideoEnded);

                // æ·»åŠ ESCé”®å…³é—­åŠŸèƒ½
                const handleKeyPress = function(e) {
                    if (e.key === 'Escape') {
                        videoPlayer.style.display = 'none';
                        videoPlayer.removeEventListener('ended', onVideoEnded);
                        document.removeEventListener('keydown', handleKeyPress);
                        videoPlayer.handleKeyPress = null;

                        // æ£€æŸ¥æ˜¯å¦ä¸ºstepsæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªæ­¥éª¤
                        let isLastStep = false;
                        if (currentSteps && currentStepIndex >= 0) {
                            isLastStep = currentStepIndex === currentSteps.length - 1;
                        } else {
                            isLastStep = true;
                        }

                        // å¦‚æœæ˜¯æœ€åä¸€ä¸ªæ­¥éª¤ï¼Œå‘é€videoEndedæ¶ˆæ¯
                        if (isLastStep) {
                            try {
                                window.parent.postMessage({
                                    type: 'videoEnded',
                                    data: {
                                        closeWindow: true,
                                        id: game_config ? game_config.id : 'unknown',
                                        from:game_config?game_config.from:'unknown',
                                    }
                                }, '*');
                            } catch (error) {
                                console.error('å‘é€videoEndedæ¶ˆæ¯æ—¶å‡ºé”™:', error);
                            }
                        }

                        onComplete();
                    }
                };
                document.addEventListener('keydown', handleKeyPress);
                videoPlayer.handleKeyPress = handleKeyPress;

                // æ’­æ”¾è§†é¢‘
                videoPlayer.play().catch(error => {
                    //console.log('è§†é¢‘è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’:', error);
                });

                //console.log('è§†é¢‘æ’­æ”¾å™¨å·²å¯åŠ¨');
            } else {
                console.error('æ‰¾ä¸åˆ°videoPlayerå…ƒç´ ');
                onComplete();
            }
        }

        // åŠ è½½URLæ­¥éª¤
        function loadUrlStep(url) {
            //console.log('åŠ è½½URLæ­¥éª¤:', url);
            configUrl = url;

            // æ˜¾ç¤ºiframe
            const iframeContent = document.getElementById('iframeContent');
            if (iframeContent) {
                //console.log('ç§»é™¤iframeContentçš„hiddenç±»');
                iframeContent.classList.remove('hidden');
            } else {
                console.error('æ‰¾ä¸åˆ°iframeContentå…ƒç´ ');
            }

            const contentFrame = document.getElementById('contentFrame');
            if (contentFrame) {
                //console.log('æ‰¾åˆ°contentFrameå…ƒç´ ');
                // å¦‚æœå·²ç»é¢„åŠ è½½äº†ç›¸åŒçš„URLï¼Œç›´æ¥ä½¿ç”¨
                if (isIframePreloaded && currentIframeUrl === url) {
                    //console.log('ä½¿ç”¨å·²é¢„åŠ è½½çš„é¡µé¢:', url);
                } else {
                    //console.log('å¼€å§‹åŠ è½½æ–°é¡µé¢:', url);
                    currentIframeUrl = url;
                    contentFrame.onload = function() {
                        //console.log('iframeåŠ è½½å®Œæˆ:', url);
                        isIframePreloaded = true;
                    };
                    contentFrame.onerror = function() {
                        console.error('iframeåŠ è½½å¤±è´¥:', url);
                    };
                    contentFrame.src = url;
                }
            } else {
                console.error('æ‰¾ä¸åˆ°contentFrameå…ƒç´ ');
            }

            // éšè—å¯¹è¯æ¡†
            setTimeout(() => {
                const dialogBox = document.getElementById('dialogBox');
                if (dialogBox) {
                    dialogBox.classList.add('hidden');
                }
            }, 100);
        }

        function startAdventure() {
            //console.log('startAdventureè¢«è°ƒç”¨');
            //console.log('game_config:', game_config);

            // ç°åœ¨videoå’Œurlé…ç½®éƒ½åœ¨stepsä¸­å¤„ç†ï¼Œä¸éœ€è¦å•ç‹¬å¤„ç†

            // å¯¹è¯ç»“æŸåéšè—æ•…äº‹å›¾ç‰‡å®¹å™¨å’Œå¯¹è¯æ¡†å®¹å™¨
            const storyImageContainer = document.querySelector('.story-image-container');
            const dialogContainer = document.querySelector('.dialog-container');

            if (storyImageContainer) {
                storyImageContainer.style.display = 'none';
                //console.log('å·²éšè—story-image-container');
            }

            if (dialogContainer) {
                dialogContainer.style.display = 'none';
                //console.log('å·²éšè—dialog-container');
            }

            // æ£€æŸ¥æ˜¯å¦æœ‰stepsé…ç½®
            if (game_config.steps && Array.isArray(game_config.steps)) {
                executeSteps(game_config.steps, 0);
                return;
            }

            // å¦‚æœæ²¡æœ‰stepsé…ç½®ï¼Œå…³é—­çª—å£
            //console.log('æ²¡æœ‰stepsé…ç½®ï¼Œå…³é—­çª—å£');
            window.parent.postMessage({ type: 'dialog', data: {
                closeWindow: true,
                id: game_config.id,
            } }, '*');
            return;
            //console.log('å¼€å§‹åŠ è½½URL:', configUrl);
            // æ˜¾ç¤ºiframe
            const iframeContent = document.getElementById('iframeContent');
            if (iframeContent) {
                //console.log('ç§»é™¤iframeContentçš„hiddenç±»');
                iframeContent.classList.remove('hidden');
                //console.log('iframeContentå½“å‰æ ·å¼:', window.getComputedStyle(iframeContent).display);
                //console.log('iframeContentå½“å‰z-index:', window.getComputedStyle(iframeContent).zIndex);
                //console.log('iframeContentå½“å‰ä½ç½®:', iframeContent.getBoundingClientRect());
                // æ·»åŠ ä¸´æ—¶è¾¹æ¡†ä»¥ä¾¿è°ƒè¯•
                iframeContent.style.border = '5px solid red';
                setTimeout(() => {
                    iframeContent.style.border = 'none';
                }, 3000);
            } else {
                console.error('æ‰¾ä¸åˆ°iframeContentå…ƒç´ ');
            }

            const contentFrame = document.getElementById('contentFrame');
            if (contentFrame) {
                //console.log('æ‰¾åˆ°contentFrameå…ƒç´ ');
                // å¦‚æœå·²ç»é¢„åŠ è½½äº†ç›¸åŒçš„URLï¼Œç›´æ¥ä½¿ç”¨
                if (isIframePreloaded && currentIframeUrl === configUrl) {
                    //console.log('ä½¿ç”¨å·²é¢„åŠ è½½çš„é¡µé¢:', configUrl);
                    // é¡µé¢å·²é¢„åŠ è½½ï¼Œæ— éœ€é‡æ–°è®¾ç½®src
                } else {
                    //console.log('å¼€å§‹åŠ è½½æ–°é¡µé¢:', configUrl);
                    // åªæœ‰åœ¨URLä¸åŒæˆ–æœªé¢„åŠ è½½æ—¶æ‰é‡æ–°åŠ è½½
                    currentIframeUrl = configUrl;
                    contentFrame.onload = function() {
                        //console.log('iframeåŠ è½½å®Œæˆ:', configUrl);
                        isIframePreloaded = true;
                    };
                    contentFrame.onerror = function() {
                        console.error('iframeåŠ è½½å¤±è´¥:', configUrl);
                    };
                    contentFrame.src = configUrl;
                }
            } else {
                console.error('æ‰¾ä¸åˆ°contentFrameå…ƒç´ ');
            }

                const dialogBox = document.getElementById('dialogBox');
                if (dialogBox) {
                    dialogBox.classList.add('hidden');
                }
                // é€šçŸ¥iframeé¡µé¢ç°åœ¨å¯è§ï¼Œå¯ä»¥å¼€å§‹è‡ªåŠ¨æ’­æ”¾
                setTimeout(() => {
                    const contentFrame = document.getElementById('contentFrame');
                    if (contentFrame && contentFrame.contentWindow) {
                        contentFrame.contentWindow.postMessage({
                            type: 'iframeVisible',
                            visible: true
                        }, '*');
                    }
                }, 10);
        }

        function nextDialog() {
            // åœæ­¢å½“å‰æ’­æ”¾çš„è¯­éŸ³
            stopAudio();



            if (isDialogEnded) {
                // å¯¹è¯å·²ç»“æŸï¼Œæ‰§è¡Œå†’é™©å¼€å§‹é€»è¾‘

                startAdventure();
                return;
            }

            currentDialogIndex++;


            if (currentDialogIndex < dialogData.length) {
                const currentDialog = dialogData[currentDialogIndex];
                const dialogTextElement = document.getElementById('dialogText');
                const storyImageElement = document.getElementById('storyImage');
                if (dialogTextElement) {
                    dialogTextElement.textContent = currentDialog.text;
                }
                if (storyImageElement) {
                    storyImageElement.src = getResourceBySkin(currentDialog.image, game_config.skin);
                }

                // æ›´æ–°æ¸¸æˆæ ‡é¢˜ - ä¼˜å…ˆä½¿ç”¨å¯¹è¯æ•°æ®ä¸­çš„title
                const dialogTitle = currentDialog.title;
                let displayTitle = '';
                if (dialogTitle && dialogTitle.trim() !== '') {
                    displayTitle = dialogTitle;
                } else if (game_config.title) {
                    displayTitle = game_config.title;
                }

                if (displayTitle) {
                    const gameTitleElement = document.getElementById('gameTitle');
                    if (gameTitleElement) {
                        gameTitleElement.textContent = displayTitle + 'ï¼š';
                        gameTitleElement.style.display = 'block';
                        // å½“displayTitleæ˜¯"æˆ‘"æ—¶ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ä¸ºé»„è‰²
                        if (displayTitle === 'ï¼ˆæˆ‘ï¼‰') {
                            gameTitleElement.style.color = '#FFD700';
                        } else {
                            gameTitleElement.style.color = 'rgba(255, 255, 255, 0.95)';
                        }
                    }
                }
                updateVirtualButtons();
                // è‡ªåŠ¨æ’­æ”¾æ–°å¯¹è¯å†…å®¹
                setTimeout(() => {
                    playAudio();
                }, 300);

            } else {
                // å¯¹è¯ç»“æŸï¼Œç›´æ¥å¼€å§‹å†’é™©

                startAdventure();
                return;
            }
        }

        window.addEventListener('message', function (e) {
            switch (e.data.type) {
                case 'setGameConfig':
                    try {
                        // å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå…ˆè§£æJSON
                        let rawConfig = JSON.parse(e.data.data);
                        //console.log('æ¸¸æˆé…ç½®å·²æ¥æ”¶ï¼ŒåŸå§‹æ•°æ®:', rawConfig);
                        if (rawConfig.id && dialogTypes[rawConfig.id]) {
                            game_config = dialogTypes[rawConfig.id];
                            game_config.skin = rawConfig.skin;
                            game_config.id = rawConfig.id;
                            game_config.from = rawConfig.from;
                        }else{
                            game_config = {}
                        }

                    } catch (error) {
                        console.error('è§£ææ¸¸æˆé…ç½®å¤±è´¥:', error);
                        // å¦‚æœè§£æå¤±è´¥ï¼Œå°è¯•ç›´æ¥ä½¿ç”¨åŸå§‹æ•°æ®
                        game_config = e.data.data || {};
                    }
                    // è§†é¢‘é…ç½®å°†åœ¨startAdventureå‡½æ•°ä¸­å¤„ç†ï¼Œè¿™é‡Œä¸æå‰è®¾ç½®
                    //console.log('æ¸¸æˆé…ç½®å·²æ¥æ”¶ï¼Œè§†é¢‘URLå°†åœ¨startAdventureä¸­å¤„ç†');

                    // æ˜¾ç¤ºæ•…äº‹å›¾ç‰‡å®¹å™¨å’Œå¯¹è¯å®¹å™¨
                    const storyImageContainer = document.querySelector('.story-image-container');
                    const dialogContainer = document.querySelector('.dialog-container');
                    if (storyImageContainer) {
                        storyImageContainer.style.display = 'flex';
                    }
                    if (dialogContainer) {
                        dialogContainer.style.display = 'flex';
                    }

                    if (game_config.dialogData) {
                        dialogData = game_config.dialogData;
                        // é‡ç½®å¯¹è¯ç´¢å¼•å’Œå¯¹è¯ç»“æŸçŠ¶æ€
                        currentDialogIndex = 0;
                        isDialogEnded = false;
                        // æ›´æ–°å½“å‰æ˜¾ç¤ºçš„å¯¹è¯
                        if (dialogData.length > 0) {
                            const dialogTextElement = document.getElementById('dialogText');
                            const storyImageElement = document.getElementById('storyImage');
                            if (dialogTextElement) {
                                dialogTextElement.textContent = dialogData[0].text;
                            }
                            if (storyImageElement) {
                                storyImageElement.src = getResourceBySkin(dialogData[0].image, game_config.skin);
                            }

                            // æ›´æ–°æ¸¸æˆæ ‡é¢˜ - ä¼˜å…ˆä½¿ç”¨å¯¹è¯æ•°æ®ä¸­çš„title
                            const dialogTitle = dialogData[0].title;
                            let displayTitle = '';
                            if (dialogTitle && dialogTitle.trim() !== '') {
                                displayTitle = dialogTitle;
                            } else if (game_config.title) {
                                displayTitle = game_config.title;
                            }

                            if (displayTitle) {
                                const gameTitleElement = document.getElementById('gameTitle');
                                if (gameTitleElement) {
                                    gameTitleElement.textContent = displayTitle + 'ï¼š';
                                    gameTitleElement.style.display = 'block';
                                    // å½“displayTitleæ˜¯"æˆ‘"æ—¶ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ä¸ºé»„è‰²
                                    if (displayTitle === 'ï¼ˆæˆ‘ï¼‰') {
                                        gameTitleElement.style.color = '#FFD700';
                                    } else {
                                        gameTitleElement.style.color = 'rgba(255, 255, 255, 0.95)';
                                    }
                                }
                            }
                            // è‡ªåŠ¨æ’­æ”¾æ–°å¯¹è¯å†…å®¹
                            setTimeout(() => {
                                playAudio();
                            }, 500);
                        }
                        // æ›´æ–°è™šæ‹ŸæŒ‰é’®çŠ¶æ€
                        updateVirtualButtons();

                    }
                    if (game_config.title) {
                        gameTitle = game_config.title;
                        // æ˜¾ç¤ºæ¸¸æˆæ ‡é¢˜å¹¶æ›´æ–°å†…å®¹ - ä¼˜å…ˆä½¿ç”¨å¯¹è¯æ•°æ®ä¸­çš„title
                        let displayTitle = '';
                        if (dialogData.length > 0 && dialogData[currentDialogIndex]) {
                            const dialogTitle = dialogData[currentDialogIndex].title;
                            if (dialogTitle && dialogTitle.trim() !== '') {
                                displayTitle = dialogTitle;
                            } else {
                                displayTitle = gameTitle;
                            }
                        } else {
                            displayTitle = gameTitle;
                        }

                        const gameTitleElement = document.getElementById('gameTitle');
                        if (gameTitleElement) {
                            gameTitleElement.textContent = displayTitle + 'ï¼š';
                            gameTitleElement.style.display = 'block';
                            // å½“displayTitleæ˜¯"æˆ‘"æ—¶ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ä¸ºé»„è‰²
                            if (displayTitle === 'ï¼ˆæˆ‘ï¼‰') {
                                gameTitleElement.style.color = '#FFD700';
                            } else {
                                gameTitleElement.style.color = 'rgba(255, 255, 255, 0.95)';
                            }
                        }
                    }
                    // URLé…ç½®å°†åœ¨startAdventureå‡½æ•°ä¸­å¤„ç†ï¼Œè¿™é‡Œä¸æå‰è®¾ç½®å’Œé¢„åŠ è½½
                    //console.log('æ¸¸æˆé…ç½®å·²æ¥æ”¶ï¼ŒURLå°†åœ¨startAdventureä¸­å¤„ç†');
                    break;
                case 'selectDragonType':
                    // å¤„ç†æ¥è‡ªselect_egg_guideé¡µé¢çš„é¾™ç±»å‹é€‰æ‹©æ¶ˆæ¯
                    if (e.data.data && e.data.data.dragonType) {
                        // å°†æ¶ˆæ¯è½¬å‘ç»™çˆ¶çª—å£
                        window.parent.postMessage({
                            type: 'selectDragonType',
                            data: e.data.data
                        }, '*');

                        // å¦‚æœéœ€è¦å…³é—­çª—å£ï¼Œéšè—iframe
                        if (e.data.data.closeWindow) {
                            const iframeContent = document.getElementById('iframeContent');
                            const dialogBox = document.getElementById('dialogBox');
                            if (iframeContent) {
                                iframeContent.classList.add('hidden');
                            }
                            if (dialogBox) {
                                dialogBox.classList.remove('hidden');
                            }

                            // å¦‚æœå½“å‰æ­£åœ¨æ‰§è¡Œstepsï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥
                            if (currentSteps && currentStepIndex >= 0 && currentStepIndex < currentSteps.length - 1) {
                                //console.log('URLæ­¥éª¤å®Œæˆï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥');
                                executeSteps(currentSteps, currentStepIndex + 1);
                            }
                        }
                    }
                    break;
                case 'videoEnded':
                    // å¤„ç†è§†é¢‘æ’­æ”¾ç»“æŸæ¶ˆæ¯
                    if (e.data.data && e.data.data.closeWindow) {
                        //console.log('æ”¶åˆ°è§†é¢‘æ’­æ”¾ç»“æŸæ¶ˆæ¯ï¼Œç§»é™¤è§†é¢‘æ’­æ”¾å™¨');
                        // ç§»é™¤è§†é¢‘æ’­æ”¾å™¨
                        removeVideoPlayer();

                        // å°†æ¶ˆæ¯è½¬å‘ç»™çˆ¶çª—å£
                        window.parent.postMessage({
                            type: 'videoEnded',
                            data: e.data.data
                        }, '*');
                    }
                    break;
            }
        });

        function skipDialog() {
            if (isDialogEnded) return;

            // è·³è½¬åˆ°æœ€åä¸€ä¸ªå¯¹è¯
            currentDialogIndex = dialogData.length - 1;
            const currentDialog = dialogData[currentDialogIndex];
            const dialogTextElement = document.getElementById('dialogText');
            const storyImageElement = document.getElementById('storyImage');
            if (dialogTextElement) {
                dialogTextElement.textContent = currentDialog.text;
            }
            if (storyImageElement) {
                storyImageElement.src = getResourceBySkin(currentDialog.image, game_config.skin);
            }

            // æ›´æ–°æ¸¸æˆæ ‡é¢˜ - ä¼˜å…ˆä½¿ç”¨å¯¹è¯æ•°æ®ä¸­çš„title
            const dialogTitle = currentDialog.title;
            let displayTitle = '';
            if (dialogTitle && dialogTitle.trim() !== '') {
                displayTitle = dialogTitle;
            } else if (game_config.title) {
                displayTitle = game_config.title;
            }

            if (displayTitle) {
                const gameTitleElement = document.getElementById('gameTitle');
                if (gameTitleElement) {
                    gameTitleElement.textContent = displayTitle + 'ï¼š';
                    gameTitleElement.style.display = 'block';
                    // å½“displayTitleæ˜¯"æˆ‘"æ—¶ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ä¸ºé»„è‰²
                    if (displayTitle === 'ï¼ˆæˆ‘ï¼‰') {
                        gameTitleElement.style.color = '#FFD700';
                    } else {
                        gameTitleElement.style.color = 'rgba(255, 255, 255, 0.95)';
                    }
                }
            }
            updateVirtualButtons();
        }

        function previousDialog() {
            if (currentDialogIndex > 0) {
                currentDialogIndex--;
                const dialogText = document.getElementById('dialogText');
                const storyImage = document.getElementById('storyImage');

                if (dialogText) {
                    dialogText.textContent = dialogData[currentDialogIndex].text;
                }
                if (storyImage) {
                    storyImage.src = getResourceBySkin(dialogData[currentDialogIndex].image, game_config.skin);
                }

                // æ›´æ–°æ¸¸æˆæ ‡é¢˜ - ä¼˜å…ˆä½¿ç”¨å¯¹è¯æ•°æ®ä¸­çš„title
                const currentDialog = dialogData[currentDialogIndex];
                const dialogTitle = currentDialog.title;
                let displayTitle = '';
                if (dialogTitle && dialogTitle.trim() !== '') {
                    displayTitle = dialogTitle;
                } else if (game_config.title) {
                    displayTitle = game_config.title;
                }

                if (displayTitle) {
                    const gameTitleElement = document.getElementById('gameTitle');
                    if (gameTitleElement) {
                        gameTitleElement.textContent = displayTitle + 'ï¼š';
                        gameTitleElement.style.display = 'block';
                        // å½“displayTitleæ˜¯"æˆ‘"æ—¶ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ä¸ºé»„è‰²
                        if (displayTitle === 'ï¼ˆæˆ‘ï¼‰') {
                            gameTitleElement.style.color = '#FFD700';
                        } else {
                            gameTitleElement.style.color = 'rgba(255, 255, 255, 0.95)';
                        }
                    }
                }

                updateVirtualButtons();

                // åœæ­¢å½“å‰æ’­æ”¾çš„è¯­éŸ³
                stopAudio();
            }
        }

        function updateVirtualButtons() {
            const skipBtn = document.getElementById('virtualSkip');
            if (currentDialogIndex >= dialogData.length - 1) {
                skipBtn.classList.add('disabled');
            } else {
                skipBtn.classList.remove('disabled');
            }
        }

        function toggleAudio() {
            if (isPlaying) {
                stopAudio();
            } else {
                playAudio();
            }
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                   (navigator.maxTouchPoints && navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform));
        }

        function playAudio() {
            // åœæ­¢ä¹‹å‰çš„éŸ³é¢‘
            stopAudio();

            // è·å–å½“å‰å¯¹è¯çš„mp3å­—æ®µ
            const currentDialog = dialogData[currentDialogIndex];
            if (!currentDialog) {
                console.log('å½“å‰å¯¹è¯ä¸å­˜åœ¨');
                return;
            }
            
            // å¦‚æœæœ‰mp3éŸ³é¢‘ï¼Œä½¿ç”¨mp3æ’­æ”¾
            if (currentDialog.mp3) {
                playMp3Audio(currentDialog);
            } else if (currentDialog.text) {
                // å¦‚æœæ²¡æœ‰mp3éŸ³é¢‘ä½†æœ‰æ–‡æœ¬ï¼Œä½¿ç”¨SDKæ’­æ”¾è¯­éŸ³
                console.log('å½“å‰å¯¹è¯æ²¡æœ‰mp3éŸ³é¢‘ï¼Œä½¿ç”¨SDKæ’­æ”¾è¯­éŸ³');
                playTextToSpeechSDK(currentDialog.text);
            } else {
                console.log('å½“å‰å¯¹è¯æ²¡æœ‰éŸ³é¢‘å’Œæ–‡æœ¬');
                return;
            }
        }
        
        function playMp3Audio(currentDialog) {

            // åˆ›å»ºéŸ³é¢‘å¯¹è±¡
            currentAudio = new Audio(getResourceBySkin(currentDialog.mp3, game_config.skin));

            // è®¾ç½®æœ€å¤§éŸ³é‡
            currentAudio.volume = 1.0;

            // è®¾ç½®éŸ³é¢‘äº‹ä»¶ç›‘å¬
            currentAudio.onloadstart = function() {
                isPlaying = true;
                const audioButton = document.getElementById('audioButton');
                if (audioButton) {
                    audioButton.classList.add('playing');
                    audioButton.innerHTML = 'â¸ï¸';
                }
            };

            currentAudio.onended = function() {
                isPlaying = false;
                const audioButton = document.getElementById('audioButton');
                if (audioButton) {
                    audioButton.classList.remove('playing');
                    audioButton.innerHTML = 'ğŸ”Š';
                }
                currentAudio = null;
            };

            currentAudio.onerror = function(event) {
                console.error('éŸ³é¢‘æ’­æ”¾é”™è¯¯:', event);
                isPlaying = false;
                const audioButton = document.getElementById('audioButton');
                if (audioButton) {
                    audioButton.classList.remove('playing');
                    audioButton.innerHTML = 'ğŸ”Š';
                }
                currentAudio = null;
            };

            // æ’­æ”¾éŸ³é¢‘
            currentAudio.play().catch(error => {
                console.error('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                isPlaying = false;
                const audioButton = document.getElementById('audioButton');
                if (audioButton) {
                    audioButton.classList.remove('playing');
                    audioButton.innerHTML = 'ğŸ”Š';
                }
                currentAudio = null;
             });

        }

        function stopAudio() {
            // åœæ­¢mp3éŸ³é¢‘æ’­æ”¾
            if (currentAudio && isPlaying) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                isPlaying = false;
                const audioButton = document.getElementById('audioButton');
                if (audioButton) {
                    audioButton.classList.remove('playing');
                    audioButton.innerHTML = 'ğŸ”Š';
                }
                currentAudio = null;
            }

            // å…¼å®¹æ€§ï¼šåŒæ—¶åœæ­¢è¯­éŸ³åˆæˆï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
            if (currentSpeech && speechSynthesis.speaking) {
                speechSynthesis.cancel();
                currentSpeech = null;
            }
        }
        
        // ä½¿ç”¨SDKæ’­æ”¾æ–‡æœ¬è¯­éŸ³
        async function playTextToSpeechSDK(text) {
            // æ¸…ç†æ–‡æœ¬ä¸­çš„è¡¨æƒ…ç¬¦å·
            text = text.replace(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/gu, '');
            
            // æ£€æŸ¥SDKæ˜¯å¦åˆå§‹åŒ–
            if (!sdkInitialized || !sdk) {
                console.warn('KeepworkSDK æœªåˆå§‹åŒ–ï¼Œå°è¯•é‡æ–°åˆå§‹åŒ–...');
                initKeepworkSDK();
                if (!sdkInitialized) {
                    console.warn('KeepworkSDK ä¸å¯ç”¨ï¼Œä½¿ç”¨Web Speech APIé™çº§æ–¹æ¡ˆ');
                    playTextToSpeechFallback(text);
                    return;
                }
            }
            
            try {
                // è®¾ç½®æ’­æ”¾çŠ¶æ€
                isPlaying = true;
                const audioButton = document.getElementById('audioButton');
                if (audioButton) {
                    audioButton.classList.add('playing');
                    audioButton.innerHTML = 'â¸ï¸';
                }
                
                let audio_url;
                
                // æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å·²æœ‰è¯¥æ–‡æœ¬çš„éŸ³é¢‘URL
                if (audioCache.has(text)) {
                    audio_url = audioCache.get(text);
                    console.log('ä½¿ç”¨ç¼“å­˜çš„éŸ³é¢‘URL');
                } else {
                    // ä»SDKè·å–æ–°çš„éŸ³é¢‘URL
                    const result = await sdk.speech.textToAudio(text, {
                        gender: game_config?.character?.gender,
                        age: game_config?.character?.age,
                    });
                    
                    if (result && result.data) {
                        audio_url = result.data;
                        // ç¼“å­˜éŸ³é¢‘URL
                        audioCache.set(text, audio_url);
                        console.log('ç¼“å­˜æ–°çš„éŸ³é¢‘URL');
                    } else {
                        throw new Error('æ— æ³•è·å–éŸ³é¢‘URL');
                    }
                }
                
                if (audio_url) {
                    // åˆ›å»ºéŸ³é¢‘å…ƒç´ 
                    currentAudio = new Audio(audio_url);
                    
                    // ç¡®ä¿éŸ³é¢‘ä¸å¾ªç¯æ’­æ”¾
                    currentAudio.loop = false;
                    
                    // éŸ³é¢‘æ’­æ”¾å®Œæˆäº‹ä»¶
                    currentAudio.addEventListener('ended', () => {
                        console.log('SDKéŸ³é¢‘æ’­æ”¾å®Œæˆ');
                        isPlaying = false;
                        const audioButton = document.getElementById('audioButton');
                        if (audioButton) {
                            audioButton.classList.remove('playing');
                            audioButton.innerHTML = 'ğŸ”Š';
                        }
                        currentAudio = null;
                    });
                    
                    // éŸ³é¢‘å‡ºé”™äº‹ä»¶
                    currentAudio.addEventListener('error', (e) => {
                        console.error('SDKéŸ³é¢‘æ’­æ”¾å‡ºé”™:', e);
                        isPlaying = false;
                        const audioButton = document.getElementById('audioButton');
                        if (audioButton) {
                            audioButton.classList.remove('playing');
                            audioButton.innerHTML = 'ğŸ”Š';
                        }
                        currentAudio = null;
                    });
                    
                    // éŸ³é¢‘åŠ è½½å®Œæˆåå¼€å§‹æ’­æ”¾
                    currentAudio.addEventListener('canplay', () => {
                        if (currentAudio && isPlaying) {
                            currentAudio.play().catch((error) => {
                                console.error('SDKéŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
                                isPlaying = false;
                                const audioButton = document.getElementById('audioButton');
                                if (audioButton) {
                                    audioButton.classList.remove('playing');
                                    audioButton.innerHTML = 'ğŸ”Š';
                                }
                                currentAudio = null;
                            });
                        }
                    });
                    
                    // åŠ è½½éŸ³é¢‘
                    currentAudio.load();
                }
            } catch (error) {
                console.error('SDKè¯­éŸ³æ’­æ”¾å¤±è´¥:', error);
                isPlaying = false;
                const audioButton = document.getElementById('audioButton');
                if (audioButton) {
                    audioButton.classList.remove('playing');
                    audioButton.innerHTML = 'ğŸ”Š';
                }
                currentAudio = null;
                // é™çº§åˆ°Web Speech API
                playTextToSpeechFallback(text);
            }
        }
        
        // Web Speech API é™çº§æ–¹æ¡ˆ
        function playTextToSpeechFallback(text) {
            try {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.rate = 0.9;
                    utterance.pitch = 1.0;
                    utterance.volume = 0.8;
                    
                    // è®¾ç½®æ’­æ”¾çŠ¶æ€
                    isPlaying = true;
                    const audioButton = document.getElementById('audioButton');
                    if (audioButton) {
                        audioButton.classList.add('playing');
                        audioButton.innerHTML = 'â¸ï¸';
                    }
                    
                    utterance.onend = function() {
                        isPlaying = false;
                        const audioButton = document.getElementById('audioButton');
                        if (audioButton) {
                            audioButton.classList.remove('playing');
                            audioButton.innerHTML = 'ğŸ”Š';
                        }
                        currentSpeech = null;
                    };
                    
                    utterance.onerror = function(event) {
                        console.error('è¯­éŸ³åˆæˆé”™è¯¯:', event);
                        isPlaying = false;
                        const audioButton = document.getElementById('audioButton');
                        if (audioButton) {
                            audioButton.classList.remove('playing');
                            audioButton.innerHTML = 'ğŸ”Š';
                        }
                        currentSpeech = null;
                    };
                    
                    currentSpeech = utterance;
                    speechSynthesis.speak(utterance);
                } else {
                    console.error('æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³åˆæˆ');
                }
            } catch (error) {
                console.error('é™çº§è¯­éŸ³æ’­æ”¾å¤±è´¥:', error);
            }
        }

        // è§¦æ§äº‹ä»¶å¤„ç†
        function addTouchSupport() {
            const dialogButton = document.getElementById('dialogButton');
            const audioButton = document.getElementById('audioButton');
            const virtualButtons = document.querySelectorAll('.virtual-btn');

            // ä¸ºä¸»æŒ‰é’®æ·»åŠ è§¦æ§æ”¯æŒ
            dialogButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.style.transform = 'translateY(-1px) scale(0.98)';
            });

            dialogButton.addEventListener('touchend', function(e) {
                e.preventDefault();
                this.style.transform = '';
                nextDialog();
            });

            // ä¸ºè¯­éŸ³æŒ‰é’®æ·»åŠ è§¦æ§æ”¯æŒ
            audioButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.style.transform = 'translateY(-1px) scale(0.95)';
            });

            audioButton.addEventListener('touchend', function(e) {
                e.preventDefault();
                this.style.transform = '';
                toggleAudio();
            });

            // ä¸ºè™šæ‹ŸæŒ‰é’®æ·»åŠ è§¦æ§æ”¯æŒ
            virtualButtons.forEach(btn => {
                btn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    if (!this.classList.contains('disabled')) {
                        this.style.transform = 'scale(0.95)';
                    }
                });

                btn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    this.style.transform = '';
                    if (!this.classList.contains('disabled')) {
                        this.click();
                    }
                });
            });
        }

        // é”®ç›˜äº‹ä»¶å¤„ç†
        function addKeyboardSupport() {
            document.addEventListener('keydown', function(e) {
                switch(e.key) {
                    case 'Enter':
                    case ' ':
                        e.preventDefault();
                        nextDialog();
                        break;
                    case 'Escape':
                        e.preventDefault();
                        skipDialog();
                        break;
                }
            });
        }

        // é¢„åŠ è½½è§†é¢‘æ’­æ”¾å™¨
        // æ˜¾ç¤ºè§†é¢‘æ’­æ”¾å™¨
        function showVideoPlayer() {
            const video = document.getElementById('videoPlayer');

            if (!video) {
                console.error('è§†é¢‘å…ƒç´ ä¸å­˜åœ¨');
                return false;
            }

            // æ£€æŸ¥æ˜¯å¦æœ‰è§†é¢‘URL
            const videoUrl = game_config && game_config.videoUrl ? game_config.videoUrl : '';

            if (!videoUrl || videoUrl.trim() === '') {
                //console.log('æ²¡æœ‰è§†é¢‘URLï¼Œæ— æ³•æ’­æ”¾');
                return false;
            }

            //console.log('æ˜¾ç¤ºè§†é¢‘æ’­æ”¾å™¨ï¼ŒURL:', videoUrl);

            // è®¾ç½®è§†é¢‘æº
            video.src = videoUrl;

            // éšè—å¯¹è¯æ¡†
            const dialogBox = document.getElementById('dialogBox');
            if (dialogBox) {
                dialogBox.style.display = 'none';
            }

            // æ˜¾ç¤ºè§†é¢‘
            video.style.display = 'block';
            video.style.position = 'fixed';
            video.style.top = '0';
            video.style.left = '0';
            video.style.width = '100vw';
            video.style.height = '100vh';
            video.style.objectFit = 'contain';
            video.style.background = '#000';
            video.style.zIndex = '10000';
            video.controls = true;

            // æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬
            const handleKeyPress = function(e) {
                if (e.key === 'Escape') {
                    hideVideoPlayer();
                }
            };

            document.addEventListener('keydown', handleKeyPress);
            video.handleKeyPress = handleKeyPress;

            // è§†é¢‘äº‹ä»¶ç›‘å¬
            video.addEventListener('ended', function() {
                //console.log('è§†é¢‘æ’­æ”¾ç»“æŸ');
                hideVideoPlayer();
            });

            // æ’­æ”¾è§†é¢‘
            video.currentTime = 0;
            video.play().catch(function(error) {
                console.error('è§†é¢‘æ’­æ”¾å¤±è´¥:', error);
            });

            return true;
        }

        // éšè—è§†é¢‘æ’­æ”¾å™¨
        function hideVideoPlayer() {
            // console.log('hideVideoPlayerå‡½æ•°è¢«è°ƒç”¨');
            const video = document.getElementById('videoPlayer');

            if (video) {
                //console.log('éšè—è§†é¢‘æ’­æ”¾å™¨');

                // ç§»é™¤é”®ç›˜äº‹ä»¶ç›‘å¬
                if (video.handleKeyPress) {
                    document.removeEventListener('keydown', video.handleKeyPress);
                }

                // æš‚åœè§†é¢‘
                video.pause();

                // éšè—è§†é¢‘
                video.style.display = 'none';
                video.style.position = '';
                video.style.top = '';
                video.style.left = '';
                video.style.width = '';
                video.style.height = '';
                video.style.objectFit = '';
                video.style.background = '';
                video.style.zIndex = '';
                video.controls = false;

                // ä¸å†æ˜¾ç¤ºå¯¹è¯æ¡†ï¼Œå› ä¸ºstory-image-containerå’Œdialog-containeråº”è¯¥ä¿æŒéšè—çŠ¶æ€
            }

            // æ£€æŸ¥æ˜¯å¦ä¸ºstepsä¸­çš„æœ€åä¸€ä¸ªè§†é¢‘æ­¥éª¤
            let isLastVideoStep = false;
            if (currentSteps && currentStepIndex >= 0) {
                // æŸ¥æ‰¾å½“å‰æ­¥éª¤ä¹‹åæ˜¯å¦è¿˜æœ‰è§†é¢‘æ­¥éª¤
                let hasMoreVideoSteps = false;
                for (let i = currentStepIndex + 1; i < currentSteps.length; i++) {
                    if (currentSteps[i].video && currentSteps[i].video !== "") {
                        hasMoreVideoSteps = true;
                        break;
                    }
                }
                isLastVideoStep = !hasMoreVideoSteps;
                //console.log('å½“å‰æ­¥éª¤ç´¢å¼•:', currentStepIndex, 'æ€»æ­¥éª¤æ•°:', currentSteps.length, 'æ˜¯å¦ä¸ºæœ€åä¸€ä¸ªè§†é¢‘æ­¥éª¤:', isLastVideoStep);
            } else {
                // å¦‚æœä¸åœ¨stepsæ‰§è¡Œæµç¨‹ä¸­ï¼Œåˆ™è®¤ä¸ºæ˜¯æœ€åä¸€ä¸ªè§†é¢‘æ­¥éª¤
                isLastVideoStep = true;
                //console.log('ä¸åœ¨stepsæ‰§è¡Œæµç¨‹ä¸­ï¼Œé»˜è®¤ä¸ºæœ€åä¸€ä¸ªè§†é¢‘æ­¥éª¤');
            }

            // åªæœ‰åœ¨æœ€åä¸€ä¸ªè§†é¢‘æ­¥éª¤æ—¶æ‰å‘é€postMessage
            if (isLastVideoStep) {
                //console.log('å‡†å¤‡å‘é€postMessage, game_config:', game_config);
                try {
                    window.parent.postMessage({
                        type: 'videoEnded',
                        data: {
                            closeWindow: true,
                            id : game_config ? game_config.id : 'unknown',
                            from:game_config?game_config.from:'unknown',
                        }
                    }, '*');
                    //console.log('postMessageå·²å‘é€');
                } catch (error) {
                    console.error('å‘é€postMessageæ—¶å‡ºé”™:', error);
                }
            } else {
                //console.log('ä¸æ˜¯æœ€åä¸€ä¸ªè§†é¢‘æ­¥éª¤ï¼Œè·³è¿‡å‘é€postMessage');
            }
        }

        // ç«‹å³æ‰§è¡Œåˆå§‹åŒ–
        function initializePage() {
            // æ·»åŠ è§¦æ§å’Œé”®ç›˜æ”¯æŒ
            addTouchSupport();
            addKeyboardSupport();

            // åˆå§‹åŒ–è¯­éŸ³ç³»ç»Ÿ
            initVoices();

            // åˆå§‹åŒ–è™šæ‹ŸæŒ‰é’®çŠ¶æ€
            updateVirtualButtons();

            // æ£€æŸ¥å¹¶æ˜¾ç¤ºæ¸¸æˆæ ‡é¢˜ - ä¼˜å…ˆä½¿ç”¨å¯¹è¯æ•°æ®ä¸­çš„title
            let displayTitle = '';
            if (dialogData.length > 0 && dialogData[currentDialogIndex]) {
                const dialogTitle = dialogData[currentDialogIndex].title;
                if (dialogTitle && dialogTitle.trim() !== '') {
                    displayTitle = dialogTitle;
                } else if (gameTitle) {
                    displayTitle = gameTitle;
                }
            } else if (gameTitle) {
                displayTitle = gameTitle;
            }

            if (displayTitle) {
                const gameTitleElement = document.getElementById('gameTitle');
                if (gameTitleElement) {
                    gameTitleElement.textContent = displayTitle + 'ï¼š';
                    gameTitleElement.style.display = 'block';
                    // å½“displayTitleæ˜¯"æˆ‘"æ—¶ï¼Œè®¾ç½®å­—ä½“é¢œè‰²ä¸ºé»„è‰²
                    if (displayTitle === 'ï¼ˆæˆ‘ï¼‰') {
                        gameTitleElement.style.color = '#FFD700';
                    } else {
                        gameTitleElement.style.color = 'rgba(255, 255, 255, 0.95)';
                    }
                }
            }

            // æ£€æµ‹è®¾å¤‡ç±»å‹å¹¶ä¼˜åŒ–æ˜¾ç¤º
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            if (isMobile) {
                const virtualControls = document.getElementById('virtualControls');
                if (virtualControls) {
                    virtualControls.style.display = 'flex';
                }

                // ç§»åŠ¨ç«¯ç‰¹æ®Šå¤„ç†ï¼šæ·»åŠ ç”¨æˆ·äº¤äº’æç¤º
                 if (isMobileDevice()) {
                     let firstInteraction = true;
                     document.addEventListener('touchstart', function() {
                         if (firstInteraction) {
                             firstInteraction = false;
                             // æ¿€æ´»è¯­éŸ³åˆæˆ
                             if ('speechSynthesis' in window) {
                                 const testUtterance = new SpeechSynthesisUtterance('');
                                 speechSynthesis.speak(testUtterance);
                                 window.speechSynthesisActivated = true;
                             }
                         }
                     }, { once: false });
                 }
            }

            // é˜²æ­¢é¡µé¢ç¼©æ”¾
            document.addEventListener('gesturestart', function(e) {
                e.preventDefault();
            });

            document.addEventListener('gesturechange', function(e) {
                e.preventDefault();
            });

            document.addEventListener('gestureend', function(e) {
                e.preventDefault();
            });
        }

        // é¡µé¢å¯è§æ—¶ä¹Ÿå°è¯•åˆå§‹åŒ–è¯­éŸ³ï¼ˆå¤„ç†æŸäº›æµè§ˆå™¨çš„å»¶è¿ŸåŠ è½½ï¼‰
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden && !voicesLoaded) {
                setTimeout(initVoices, 100);
            }
        });

        // ç«‹å³æ‰§è¡Œé¡µé¢åˆå§‹åŒ–
        initializePage();
        
        // åˆå§‹åŒ–KeepworkSDK
        initKeepworkSDK();

        setTimeout(() => {
            gameLoaded = true;
            window.parent.postMessage({ type: 'gameLoaded',data: {
                gameName: 'dialog'
            } }, '*');
        }, 10);
    </script>

</body>
</html>